"use strict";

function loadJquery() {
  $(document).ready(function () {
    $("#toggle-sidebar").click(function () {
      $('.ui.sidebar').sidebar('toggle');
    });
  });
}
"use strict";

function loadD3() {
  console.log("hello");
  d3.json("data/document_topic_probability.json", function (x) {
    window.document_topic_probability = x;
    d3.json("data/topic_word_distribution_in_corpora.json", function (y) {
      window.word_distribution_in_corpora = y;
      d3.json("data/topic_word_probability_in_topic.json", function (z) {
        window.topic_word_probability = z;
        generateTopicVectors(); //Loads vectors in window.topicVectors

        loadVisualizations();
      });
    });
  });
}

function loadVisualizations() {}

function initPage1() {}

function initPage2() {}

function initPage3() {
  loadParallelCoordinate();
}
"use strict";

//vectors format: Map[string(topic_id): List[float]]
function get2DVectors(vectors, successCallback) {
  var request = $.ajax({
    url: "/get2DVectors",
    method: "POST",
    data: vectors
  });
  request.done(function (response) {
    successCallback(response);
  });
  request.fail(function (jqXHR, textStatus) {
    alert("Request failed: " + textStatus);
  });
} // docs format: List[List[string(word)]]


function getWord2VecClusters(docs, successCallback) {
  var request = $.ajax({
    url: "/api/getClustersWord2Vec",
    method: "POST",
    data: JSON.stringify({
      docs: docs
    }),
    contentType: "application/json; charset=utf-8",
    dataType: "json"
  });
  request.done(function (response) {
    successCallback(response);
  });
  request.fail(function (jqXHR, textStatus) {
    alert("Request failed: " + textStatus);
  });
}
"use strict";

function loadParallelCoordinate() {
  var margin = {
    top: 30,
    right: 10,
    bottom: 10,
    left: 10
  },
      width = 960 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;
  var x = d3.scale.ordinal().rangePoints([0, width], 1),
      y = {},
      dragging = {};
  var line = d3.svg.line(),
      axis = d3.svg.axis().orient("left"),
      background,
      foreground;
  var svg = d3.select("body").append("svg").attr("width", width + margin.left + margin.right).attr("height", height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("cars.csv", function (error, cars) {
    // Extract the list of dimensions and create a scale for each.
    x.domain(dimensions = d3.keys(cars[0]).filter(function (d) {
      return d != "name" && (y[d] = d3.scale.linear().domain(d3.extent(cars, function (p) {
        return +p[d];
      })).range([height, 0]));
    })); // Add grey background lines for context.

    background = svg.append("g").attr("class", "background").selectAll("path").data(cars).enter().append("path").attr("d", path); // Add blue foreground lines for focus.

    foreground = svg.append("g").attr("class", "foreground").selectAll("path").data(cars).enter().append("path").attr("d", path); // Add a group element for each dimension.

    var g = svg.selectAll(".dimension").data(dimensions).enter().append("g").attr("class", "dimension").attr("transform", function (d) {
      return "translate(" + x(d) + ")";
    }).call(d3.behavior.drag().origin(function (d) {
      return {
        x: x(d)
      };
    }).on("dragstart", function (d) {
      dragging[d] = x(d);
      background.attr("visibility", "hidden");
    }).on("drag", function (d) {
      dragging[d] = Math.min(width, Math.max(0, d3.event.x));
      foreground.attr("d", path);
      dimensions.sort(function (a, b) {
        return position(a) - position(b);
      });
      x.domain(dimensions);
      g.attr("transform", function (d) {
        return "translate(" + position(d) + ")";
      });
    }).on("dragend", function (d) {
      delete dragging[d];
      transition(d3.select(this)).attr("transform", "translate(" + x(d) + ")");
      transition(foreground).attr("d", path);
      background.attr("d", path).transition().delay(500).duration(0).attr("visibility", null);
    })); // Add an axis and title.

    g.append("g").attr("class", "axis").each(function (d) {
      d3.select(this).call(axis.scale(y[d]));
    }).append("text").style("text-anchor", "middle").attr("y", -9).text(function (d) {
      return d;
    }); // Add and store a brush for each axis.

    g.append("g").attr("class", "brush").each(function (d) {
      d3.select(this).call(y[d].brush = d3.svg.brush().y(y[d]).on("brushstart", brushstart).on("brush", brush));
    }).selectAll("rect").attr("x", -8).attr("width", 16);
  });

  function position(d) {
    var v = dragging[d];
    return v == null ? x(d) : v;
  }

  function transition(g) {
    return g.transition().duration(500);
  } // Returns the path for a given data point.


  function path(d) {
    return line(dimensions.map(function (p) {
      return [position(p), y[p](d[p])];
    }));
  }

  function brushstart() {
    d3.event.sourceEvent.stopPropagation();
  } // Handles a brush event, toggling the display of foreground lines.


  function brush() {
    var actives = dimensions.filter(function (p) {
      return !y[p].brush.empty();
    }),
        extents = actives.map(function (p) {
      return y[p].brush.extent();
    });
    foreground.style("display", function (d) {
      return actives.every(function (p, i) {
        return extents[i][0] <= d[p] && d[p] <= extents[i][1];
      }) ? null : "none";
    });
  }
}
"use strict";

function generateTopicVectors() {
  window.topicVectors = {};

  if (window.topic_word_probability_in_topic) {
    for (var x in window.topic_word_probability_in_topic) {
      var vector = [];

      for (var y in window.topic_word_probability_in_topic[x]) {
        vector.push(window.topic_word_probability_in_topic[x][y]);
      }

      window.topicVectors[x] = vector;
    }
  }
}

function generateParallelCoordinateData() {
  var words = window.word_distribution_in_corpora.keys();
  var topic_word_threshold = 0.3;
  window.topic_word_probability.map(function (x) {});
}
"use strict";

window.vueApp = new Vue({
  el: '#vue-app',
  data: {
    message: 'Hello user!',
    noneSelected: true,
    selectedPage: 1,
    playerDetail: {
      name: "<Player Name>"
    },
    overviewFilters: {},
    selectedMap: 1
  },
  methods: {
    selectPage: function selectPage(x) {
      this.selectedPage = x;

      if (x == 1) {
        initPage1();
      }

      if (x == 2) {
        initPage2();
      }

      if (x == 3) {
        initPage3();
      }
    }
  },
  mounted: function mounted() {
    console.log("Mounted");
    loadD3();
    loadJquery();
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50cy5qcyIsIm1haW4uanMiLCJuZXR3b3JrLmpzIiwicGFyYWxsZWwtY29vcmRpbmF0ZS5qcyIsInV0aWwuanMiLCJ2dWVfbW9kZWwuanMiXSwibmFtZXMiOlsibG9hZEpxdWVyeSIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiY2xpY2siLCJzaWRlYmFyIiwibG9hZEQzIiwiY29uc29sZSIsImxvZyIsImQzIiwianNvbiIsIngiLCJ3aW5kb3ciLCJkb2N1bWVudF90b3BpY19wcm9iYWJpbGl0eSIsInkiLCJ3b3JkX2Rpc3RyaWJ1dGlvbl9pbl9jb3Jwb3JhIiwieiIsInRvcGljX3dvcmRfcHJvYmFiaWxpdHkiLCJnZW5lcmF0ZVRvcGljVmVjdG9ycyIsImxvYWRWaXN1YWxpemF0aW9ucyIsImluaXRQYWdlMSIsImluaXRQYWdlMiIsImluaXRQYWdlMyIsImxvYWRQYXJhbGxlbENvb3JkaW5hdGUiLCJnZXQyRFZlY3RvcnMiLCJ2ZWN0b3JzIiwic3VjY2Vzc0NhbGxiYWNrIiwicmVxdWVzdCIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwiZG9uZSIsInJlc3BvbnNlIiwiZmFpbCIsImpxWEhSIiwidGV4dFN0YXR1cyIsImFsZXJ0IiwiZ2V0V29yZDJWZWNDbHVzdGVycyIsImRvY3MiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudFR5cGUiLCJkYXRhVHlwZSIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0Iiwic2NhbGUiLCJvcmRpbmFsIiwicmFuZ2VQb2ludHMiLCJkcmFnZ2luZyIsImxpbmUiLCJzdmciLCJheGlzIiwib3JpZW50IiwiYmFja2dyb3VuZCIsImZvcmVncm91bmQiLCJzZWxlY3QiLCJhcHBlbmQiLCJhdHRyIiwiY3N2IiwiZXJyb3IiLCJjYXJzIiwiZG9tYWluIiwiZGltZW5zaW9ucyIsImtleXMiLCJmaWx0ZXIiLCJkIiwibGluZWFyIiwiZXh0ZW50IiwicCIsInJhbmdlIiwic2VsZWN0QWxsIiwiZW50ZXIiLCJwYXRoIiwiZyIsImNhbGwiLCJiZWhhdmlvciIsImRyYWciLCJvcmlnaW4iLCJvbiIsIk1hdGgiLCJtaW4iLCJtYXgiLCJldmVudCIsInNvcnQiLCJhIiwiYiIsInBvc2l0aW9uIiwidHJhbnNpdGlvbiIsImRlbGF5IiwiZHVyYXRpb24iLCJlYWNoIiwic3R5bGUiLCJ0ZXh0IiwiYnJ1c2giLCJicnVzaHN0YXJ0IiwidiIsIm1hcCIsInNvdXJjZUV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiYWN0aXZlcyIsImVtcHR5IiwiZXh0ZW50cyIsImV2ZXJ5IiwiaSIsInRvcGljVmVjdG9ycyIsInRvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWMiLCJ2ZWN0b3IiLCJwdXNoIiwiZ2VuZXJhdGVQYXJhbGxlbENvb3JkaW5hdGVEYXRhIiwid29yZHMiLCJ0b3BpY193b3JkX3RocmVzaG9sZCIsInZ1ZUFwcCIsIlZ1ZSIsImVsIiwibWVzc2FnZSIsIm5vbmVTZWxlY3RlZCIsInNlbGVjdGVkUGFnZSIsInBsYXllckRldGFpbCIsIm5hbWUiLCJvdmVydmlld0ZpbHRlcnMiLCJzZWxlY3RlZE1hcCIsIm1ldGhvZHMiLCJzZWxlY3RQYWdlIiwibW91bnRlZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxVQUFULEdBQXFCO0FBQ2pCQyxFQUFBQSxDQUFDLENBQUNDLFFBQUQsQ0FBRCxDQUFZQyxLQUFaLENBQWtCLFlBQVU7QUFDeEJGLElBQUFBLENBQUMsQ0FBQyxpQkFBRCxDQUFELENBQXFCRyxLQUFyQixDQUEyQixZQUFVO0FBQ2pDSCxNQUFBQSxDQUFDLENBQUMsYUFBRCxDQUFELENBQ0tJLE9BREwsQ0FDYSxRQURiO0FBR0gsS0FKRDtBQU1ILEdBUEQ7QUFRSDs7O0FDVEQsU0FBU0MsTUFBVCxHQUFpQjtBQUNiQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxPQUFaO0FBQ0FDLEVBQUFBLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRLHNDQUFSLEVBQWdELFVBQVND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UztBQUNaOztBQUNELFVBQUlULENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFUsUUFBQUEsU0FBUztBQUNaOztBQUNELFVBQUlWLENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFcsUUFBQUEsU0FBUztBQUNaO0FBQ0o7QUFaSSxHQVpXO0FBMEJwQjJHLEVBQUFBLE9BQU8sRUFBRSxtQkFBVTtBQUNmMUgsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksU0FBWjtBQUNBRixJQUFBQSxNQUFNO0FBQ05OLElBQUFBLFVBQVU7QUFDYjtBQTlCbUIsQ0FBUixDQUFoQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBsb2FkSnF1ZXJ5KCl7XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgICAgICQoXCIjdG9nZ2xlLXNpZGViYXJcIikuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLnVpLnNpZGViYXInKVxyXG4gICAgICAgICAgICAgICAgLnNpZGViYXIoJ3RvZ2dsZScpXHJcbiAgICAgICAgICAgIDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgIH0pO1xyXG59XHJcbiIsImZ1bmN0aW9uIGxvYWREMygpe1xyXG4gICAgY29uc29sZS5sb2coXCJoZWxsb1wiKTtcclxuICAgIGQzLmpzb24oXCJkYXRhL2RvY3VtZW50X3RvcGljX3Byb2JhYmlsaXR5Lmpzb25cIiwgZnVuY3Rpb24oeCl7XHJcbiAgICAgICAgd2luZG93LmRvY3VtZW50X3RvcGljX3Byb2JhYmlsaXR5PSB4O1xyXG4gICAgICAgIGQzLmpzb24oXCJkYXRhL3RvcGljX3dvcmRfZGlzdHJpYnV0aW9uX2luX2NvcnBvcmEuanNvblwiLCBmdW5jdGlvbih5KXtcclxuICAgICAgICAgICAgd2luZG93LndvcmRfZGlzdHJpYnV0aW9uX2luX2NvcnBvcmE9IHk7XHJcbiAgICAgICAgICAgIGQzLmpzb24oXCJkYXRhL3RvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWMuanNvblwiLCBmdW5jdGlvbih6KXtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy50b3BpY193b3JkX3Byb2JhYmlsaXR5ID0gejtcclxuICAgICAgICAgICAgICAgIGdlbmVyYXRlVG9waWNWZWN0b3JzKCk7IC8vTG9hZHMgdmVjdG9ycyBpbiB3aW5kb3cudG9waWNWZWN0b3JzXHJcbiAgICAgICAgICAgICAgICBsb2FkVmlzdWFsaXphdGlvbnMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFZpc3VhbGl6YXRpb25zKCl7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0UGFnZTEoKXtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRQYWdlMigpe1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFBhZ2UzKCl7XHJcbiAgICBsb2FkUGFyYWxsZWxDb29yZGluYXRlKCk7XHJcbn0iLCIvL3ZlY3RvcnMgZm9ybWF0OiBNYXBbc3RyaW5nKHRvcGljX2lkKTogTGlzdFtmbG9hdF1dXHJcbmZ1bmN0aW9uIGdldDJEVmVjdG9ycyh2ZWN0b3JzLCBzdWNjZXNzQ2FsbGJhY2spe1xyXG4gICAgdmFyIHJlcXVlc3QgPSAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogXCIvZ2V0MkRWZWN0b3JzXCIsXHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBkYXRhOiB2ZWN0b3JzXHJcbiAgICAgIH0pO1xyXG4gICAgICAgXHJcbiAgICAgIHJlcXVlc3QuZG9uZShmdW5jdGlvbiggcmVzcG9uc2UgKSB7XHJcbiAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKTtcclxuICAgICAgfSk7XHJcbiAgICAgICBcclxuICAgICAgcmVxdWVzdC5mYWlsKGZ1bmN0aW9uKCBqcVhIUiwgdGV4dFN0YXR1cyApIHtcclxuICAgICAgICBhbGVydCggXCJSZXF1ZXN0IGZhaWxlZDogXCIgKyB0ZXh0U3RhdHVzICk7XHJcbiAgICAgIH0pO1xyXG59XHJcblxyXG4vLyBkb2NzIGZvcm1hdDogTGlzdFtMaXN0W3N0cmluZyh3b3JkKV1dXHJcbmZ1bmN0aW9uIGdldFdvcmQyVmVjQ2x1c3RlcnMoZG9jcywgc3VjY2Vzc0NhbGxiYWNrKXtcclxuICAgIHZhciByZXF1ZXN0ID0gJC5hamF4KHtcclxuICAgICAgICB1cmw6IFwiL2FwaS9nZXRDbHVzdGVyc1dvcmQyVmVjXCIsXHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7ZG9jczogZG9jc30pLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcclxuICAgICAgICBkYXRhVHlwZSAgIDogXCJqc29uXCJcclxuICAgICAgfSk7XHJcbiAgICAgICBcclxuICAgICAgcmVxdWVzdC5kb25lKGZ1bmN0aW9uKCByZXNwb25zZSApIHtcclxuICAgICAgICBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuICAgICAgIFxyXG4gICAgICByZXF1ZXN0LmZhaWwoZnVuY3Rpb24oIGpxWEhSLCB0ZXh0U3RhdHVzICkge1xyXG4gICAgICAgIGFsZXJ0KCBcIlJlcXVlc3QgZmFpbGVkOiBcIiArIHRleHRTdGF0dXMgKTtcclxuICAgICAgfSk7XHJcbn1cclxuXHJcbiIsImZ1bmN0aW9uIGxvYWRQYXJhbGxlbENvb3JkaW5hdGUoKXtcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDEwLCBib3R0b206IDEwLCBsZWZ0OiAxMH0sXHJcbiAgICAgICAgd2lkdGggPSA5NjAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcclxuICAgICAgICBoZWlnaHQgPSA1MDAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcclxuXHJcbiAgICB2YXIgeCA9IGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZVBvaW50cyhbMCwgd2lkdGhdLCAxKSxcclxuICAgICAgICB5ID0ge30sXHJcbiAgICAgICAgZHJhZ2dpbmcgPSB7fTtcclxuXHJcbiAgICB2YXIgbGluZSA9IGQzLnN2Zy5saW5lKCksXHJcbiAgICAgICAgYXhpcyA9IGQzLnN2Zy5heGlzKCkub3JpZW50KFwibGVmdFwiKSxcclxuICAgICAgICBiYWNrZ3JvdW5kLFxyXG4gICAgICAgIGZvcmVncm91bmQ7XHJcblxyXG4gICAgdmFyIHN2ZyA9IGQzLnNlbGVjdChcImJvZHlcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxyXG4gICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxyXG4gICAgLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xyXG5cclxuICAgIGQzLmNzdihcImNhcnMuY3N2XCIsIGZ1bmN0aW9uKGVycm9yLCBjYXJzKSB7XHJcblxyXG4gICAgLy8gRXh0cmFjdCB0aGUgbGlzdCBvZiBkaW1lbnNpb25zIGFuZCBjcmVhdGUgYSBzY2FsZSBmb3IgZWFjaC5cclxuICAgIHguZG9tYWluKGRpbWVuc2lvbnMgPSBkMy5rZXlzKGNhcnNbMF0pLmZpbHRlcihmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgcmV0dXJuIGQgIT0gXCJuYW1lXCIgJiYgKHlbZF0gPSBkMy5zY2FsZS5saW5lYXIoKVxyXG4gICAgICAgICAgICAuZG9tYWluKGQzLmV4dGVudChjYXJzLCBmdW5jdGlvbihwKSB7IHJldHVybiArcFtkXTsgfSkpXHJcbiAgICAgICAgICAgIC5yYW5nZShbaGVpZ2h0LCAwXSkpO1xyXG4gICAgfSkpO1xyXG5cclxuICAgIC8vIEFkZCBncmV5IGJhY2tncm91bmQgbGluZXMgZm9yIGNvbnRleHQuXHJcbiAgICBiYWNrZ3JvdW5kID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYmFja2dyb3VuZFwiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJwYXRoXCIpXHJcbiAgICAgICAgLmRhdGEoY2FycylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpO1xyXG5cclxuICAgIC8vIEFkZCBibHVlIGZvcmVncm91bmQgbGluZXMgZm9yIGZvY3VzLlxyXG4gICAgZm9yZWdyb3VuZCA9IHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImZvcmVncm91bmRcIilcclxuICAgICAgICAuc2VsZWN0QWxsKFwicGF0aFwiKVxyXG4gICAgICAgIC5kYXRhKGNhcnMpXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKVxyXG4gICAgICAgIC5hdHRyKFwiZFwiLCBwYXRoKTtcclxuXHJcbiAgICAvLyBBZGQgYSBncm91cCBlbGVtZW50IGZvciBlYWNoIGRpbWVuc2lvbi5cclxuICAgIHZhciBnID0gc3ZnLnNlbGVjdEFsbChcIi5kaW1lbnNpb25cIilcclxuICAgICAgICAuZGF0YShkaW1lbnNpb25zKVxyXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZGltZW5zaW9uXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB4KGQpICsgXCIpXCI7IH0pXHJcbiAgICAgICAgLmNhbGwoZDMuYmVoYXZpb3IuZHJhZygpXHJcbiAgICAgICAgICAgIC5vcmlnaW4oZnVuY3Rpb24oZCkgeyByZXR1cm4ge3g6IHgoZCl9OyB9KVxyXG4gICAgICAgICAgICAub24oXCJkcmFnc3RhcnRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBkcmFnZ2luZ1tkXSA9IHgoZCk7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQuYXR0cihcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBkcmFnZ2luZ1tkXSA9IE1hdGgubWluKHdpZHRoLCBNYXRoLm1heCgwLCBkMy5ldmVudC54KSk7XHJcbiAgICAgICAgICAgIGZvcmVncm91bmQuYXR0cihcImRcIiwgcGF0aCk7XHJcbiAgICAgICAgICAgIGRpbWVuc2lvbnMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBwb3NpdGlvbihhKSAtIHBvc2l0aW9uKGIpOyB9KTtcclxuICAgICAgICAgICAgeC5kb21haW4oZGltZW5zaW9ucyk7XHJcbiAgICAgICAgICAgIGcuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHBvc2l0aW9uKGQpICsgXCIpXCI7IH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBkZWxldGUgZHJhZ2dpbmdbZF07XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24oZDMuc2VsZWN0KHRoaXMpKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgeChkKSArIFwiKVwiKTtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbihmb3JlZ3JvdW5kKS5hdHRyKFwiZFwiLCBwYXRoKTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZFxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpXHJcbiAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgICAgICAuZGVsYXkoNTAwKVxyXG4gICAgICAgICAgICAgICAgLmR1cmF0aW9uKDApXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcInZpc2liaWxpdHlcIiwgbnVsbCk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAvLyBBZGQgYW4gYXhpcyBhbmQgdGl0bGUuXHJcbiAgICBnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXhpc1wiKVxyXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHsgZDMuc2VsZWN0KHRoaXMpLmNhbGwoYXhpcy5zY2FsZSh5W2RdKSk7IH0pXHJcbiAgICAgICAgLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieVwiLCAtOSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkOyB9KTtcclxuXHJcbiAgICAvLyBBZGQgYW5kIHN0b3JlIGEgYnJ1c2ggZm9yIGVhY2ggYXhpcy5cclxuICAgIGcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJicnVzaFwiKVxyXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNhbGwoeVtkXS5icnVzaCA9IGQzLnN2Zy5icnVzaCgpLnkoeVtkXSkub24oXCJicnVzaHN0YXJ0XCIsIGJydXNoc3RhcnQpLm9uKFwiYnJ1c2hcIiwgYnJ1c2gpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJyZWN0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIC04KVxyXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgMTYpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gcG9zaXRpb24oZCkge1xyXG4gICAgdmFyIHYgPSBkcmFnZ2luZ1tkXTtcclxuICAgIHJldHVybiB2ID09IG51bGwgPyB4KGQpIDogdjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0cmFuc2l0aW9uKGcpIHtcclxuICAgIHJldHVybiBnLnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgdGhlIHBhdGggZm9yIGEgZ2l2ZW4gZGF0YSBwb2ludC5cclxuICAgIGZ1bmN0aW9uIHBhdGgoZCkge1xyXG4gICAgcmV0dXJuIGxpbmUoZGltZW5zaW9ucy5tYXAoZnVuY3Rpb24ocCkgeyByZXR1cm4gW3Bvc2l0aW9uKHApLCB5W3BdKGRbcF0pXTsgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGJydXNoc3RhcnQoKSB7XHJcbiAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYW5kbGVzIGEgYnJ1c2ggZXZlbnQsIHRvZ2dsaW5nIHRoZSBkaXNwbGF5IG9mIGZvcmVncm91bmQgbGluZXMuXHJcbiAgICBmdW5jdGlvbiBicnVzaCgpIHtcclxuICAgIHZhciBhY3RpdmVzID0gZGltZW5zaW9ucy5maWx0ZXIoZnVuY3Rpb24ocCkgeyByZXR1cm4gIXlbcF0uYnJ1c2guZW1wdHkoKTsgfSksXHJcbiAgICAgICAgZXh0ZW50cyA9IGFjdGl2ZXMubWFwKGZ1bmN0aW9uKHApIHsgcmV0dXJuIHlbcF0uYnJ1c2guZXh0ZW50KCk7IH0pO1xyXG4gICAgZm9yZWdyb3VuZC5zdHlsZShcImRpc3BsYXlcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIHJldHVybiBhY3RpdmVzLmV2ZXJ5KGZ1bmN0aW9uKHAsIGkpIHtcclxuICAgICAgICByZXR1cm4gZXh0ZW50c1tpXVswXSA8PSBkW3BdICYmIGRbcF0gPD0gZXh0ZW50c1tpXVsxXTtcclxuICAgICAgICB9KSA/IG51bGwgOiBcIm5vbmVcIjtcclxuICAgIH0pO1xyXG4gICAgfVxyXG5cclxufSIsImZ1bmN0aW9uIGdlbmVyYXRlVG9waWNWZWN0b3JzKCl7XHJcbiAgICB3aW5kb3cudG9waWNWZWN0b3JzID0ge307XHJcbiAgICBpZih3aW5kb3cudG9waWNfd29yZF9wcm9iYWJpbGl0eV9pbl90b3BpYyl7XHJcbiAgICAgICAgZm9yKHZhciB4IGluIHdpbmRvdy50b3BpY193b3JkX3Byb2JhYmlsaXR5X2luX3RvcGljKXtcclxuICAgICAgICAgICAgdmFyIHZlY3RvciA9IFtdO1xyXG4gICAgICAgICAgICBmb3IodmFyIHkgaW4gd2luZG93LnRvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWNbeF0pe1xyXG4gICAgICAgICAgICAgICAgdmVjdG9yLnB1c2god2luZG93LnRvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWNbeF1beV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpbmRvdy50b3BpY1ZlY3RvcnNbeF0gPSB2ZWN0b3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVBhcmFsbGVsQ29vcmRpbmF0ZURhdGEoKXtcclxuICAgIHZhciB3b3JkcyA9IHdpbmRvdy53b3JkX2Rpc3RyaWJ1dGlvbl9pbl9jb3Jwb3JhLmtleXMoKTtcclxuICAgIHZhciB0b3BpY193b3JkX3RocmVzaG9sZCA9IDAuMztcclxuICAgIHdpbmRvdy50b3BpY193b3JkX3Byb2JhYmlsaXR5Lm1hcCh4ID0+IHtcclxuICAgICAgICBcclxuICAgIH0pO1xyXG59XHJcblxyXG4iLCJ3aW5kb3cudnVlQXBwID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogJyN2dWUtYXBwJyxcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBtZXNzYWdlOiAnSGVsbG8gdXNlciEnLFxyXG4gICAgICAgIG5vbmVTZWxlY3RlZDogdHJ1ZSxcclxuICAgICAgICBzZWxlY3RlZFBhZ2U6IDEsXHJcbiAgICAgICAgcGxheWVyRGV0YWlsOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiPFBsYXllciBOYW1lPlwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvdmVydmlld0ZpbHRlcnM6IHt9LFxyXG4gICAgICAgIHNlbGVjdGVkTWFwOiAxXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIHNlbGVjdFBhZ2U6IGZ1bmN0aW9uKHgpe1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGFnZSA9IHg7XHJcbiAgICAgICAgICAgIGlmICh4ID09IDEpe1xyXG4gICAgICAgICAgICAgICAgaW5pdFBhZ2UxKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPT0gMil7XHJcbiAgICAgICAgICAgICAgICBpbml0UGFnZTIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoeCA9PSAzKXtcclxuICAgICAgICAgICAgICAgIGluaXRQYWdlMygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJNb3VudGVkXCIpO1xyXG4gICAgICAgIGxvYWREMygpO1xyXG4gICAgICAgIGxvYWRKcXVlcnkoKTtcclxuICAgIH1cclxufSk7Il19
