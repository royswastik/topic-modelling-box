"use strict";

function loadJquery() {
  $(document).ready(function () {
    $("#toggle-sidebar").click(function () {
      $('.ui.sidebar').sidebar('toggle');
    });
  });
}
"use strict";

function loadD3() {
  console.log("hello");
  d3.csv("data/document_topic_probability.json", function (x) {
    window.document_topic_probability = x;
    d3.csv("data/topic_word_distribution_in_corpora.json", function (y) {
      window.word_distribution_in_corpora = y;
      d3.csv("data/topic_word_probability_in_topic.json", function (z) {
        window.topic_word_probability = z;
        generateTopicVectors(); //Loads vectors in window.topicVectors

        loadVisualizations();
      });
    });
  });
}

function loadVisualizations() {}

function initPage1() {}

function initPage2() {}

function initPage3() {
  loadParallelCoordinate();
}
"use strict";

function get2DVectors(vectors, successCallback) {
  var request = $.ajax({
    url: "/get2DVectors",
    method: "POST",
    data: vectors
  });
  request.done(function (response) {
    successCallback(response);
  });
  request.fail(function (jqXHR, textStatus) {
    alert("Request failed: " + textStatus);
  });
}
"use strict";

function loadParallelCoordinate() {
  var margin = {
    top: 30,
    right: 10,
    bottom: 10,
    left: 10
  },
      width = 960 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;
  var x = d3.scale.ordinal().rangePoints([0, width], 1),
      y = {},
      dragging = {};
  var line = d3.svg.line(),
      axis = d3.svg.axis().orient("left"),
      background,
      foreground;
  var svg = d3.select("body").append("svg").attr("width", width + margin.left + margin.right).attr("height", height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("cars.csv", function (error, cars) {
    // Extract the list of dimensions and create a scale for each.
    x.domain(dimensions = d3.keys(cars[0]).filter(function (d) {
      return d != "name" && (y[d] = d3.scale.linear().domain(d3.extent(cars, function (p) {
        return +p[d];
      })).range([height, 0]));
    })); // Add grey background lines for context.

    background = svg.append("g").attr("class", "background").selectAll("path").data(cars).enter().append("path").attr("d", path); // Add blue foreground lines for focus.

    foreground = svg.append("g").attr("class", "foreground").selectAll("path").data(cars).enter().append("path").attr("d", path); // Add a group element for each dimension.

    var g = svg.selectAll(".dimension").data(dimensions).enter().append("g").attr("class", "dimension").attr("transform", function (d) {
      return "translate(" + x(d) + ")";
    }).call(d3.behavior.drag().origin(function (d) {
      return {
        x: x(d)
      };
    }).on("dragstart", function (d) {
      dragging[d] = x(d);
      background.attr("visibility", "hidden");
    }).on("drag", function (d) {
      dragging[d] = Math.min(width, Math.max(0, d3.event.x));
      foreground.attr("d", path);
      dimensions.sort(function (a, b) {
        return position(a) - position(b);
      });
      x.domain(dimensions);
      g.attr("transform", function (d) {
        return "translate(" + position(d) + ")";
      });
    }).on("dragend", function (d) {
      delete dragging[d];
      transition(d3.select(this)).attr("transform", "translate(" + x(d) + ")");
      transition(foreground).attr("d", path);
      background.attr("d", path).transition().delay(500).duration(0).attr("visibility", null);
    })); // Add an axis and title.

    g.append("g").attr("class", "axis").each(function (d) {
      d3.select(this).call(axis.scale(y[d]));
    }).append("text").style("text-anchor", "middle").attr("y", -9).text(function (d) {
      return d;
    }); // Add and store a brush for each axis.

    g.append("g").attr("class", "brush").each(function (d) {
      d3.select(this).call(y[d].brush = d3.svg.brush().y(y[d]).on("brushstart", brushstart).on("brush", brush));
    }).selectAll("rect").attr("x", -8).attr("width", 16);
  });

  function position(d) {
    var v = dragging[d];
    return v == null ? x(d) : v;
  }

  function transition(g) {
    return g.transition().duration(500);
  } // Returns the path for a given data point.


  function path(d) {
    return line(dimensions.map(function (p) {
      return [position(p), y[p](d[p])];
    }));
  }

  function brushstart() {
    d3.event.sourceEvent.stopPropagation();
  } // Handles a brush event, toggling the display of foreground lines.


  function brush() {
    var actives = dimensions.filter(function (p) {
      return !y[p].brush.empty();
    }),
        extents = actives.map(function (p) {
      return y[p].brush.extent();
    });
    foreground.style("display", function (d) {
      return actives.every(function (p, i) {
        return extents[i][0] <= d[p] && d[p] <= extents[i][1];
      }) ? null : "none";
    });
  }
}
"use strict";

function generateTopicVectors() {
  window.topicVectors = {};

  if (window.topic_word_probability_in_topic) {
    for (var x in window.topic_word_probability_in_topic) {
      var vector = [];

      for (var y in window.topic_word_probability_in_topic[x]) {
        vector.push(window.topic_word_probability_in_topic[x][y]);
      }

      window.topicVectors[x] = vector;
    }
  }
}

function generateParallelCoordinateData() {
  var words = window.word_distribution_in_corpora.keys();
  var topic_word_threshold = 0.3;
}
"use strict";

window.vueApp = new Vue({
  el: '#vue-app',
  data: {
    message: 'Hello user!',
    noneSelected: true,
    selectedPage: 1,
    playerDetail: {
      name: "<Player Name>"
    },
    overviewFilters: {},
    selectedMap: 1
  },
  methods: {
    selectPage: function selectPage(x) {
      this.selectedPage = x;

      if (x == 1) {
        initPage1();
      }

      if (x == 2) {
        initPage2();
      }

      if (x == 3) {
        initPage3();
      }
    }
  },
  mounted: function mounted() {
    console.log("Mounted");
    loadD3();
    loadJquery();
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50cy5qcyIsIm1haW4uanMiLCJuZXR3b3JrLmpzIiwicGFyYWxsZWwtY29vcmRpbmF0ZS5qcyIsInV0aWwuanMiLCJ2dWVfbW9kZWwuanMiXSwibmFtZXMiOlsibG9hZEpxdWVyeSIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiY2xpY2siLCJzaWRlYmFyIiwibG9hZEQzIiwiY29uc29sZSIsImxvZyIsImQzIiwiY3N2IiwieCIsIndpbmRvdyIsImRvY3VtZW50X3RvcGljX3Byb2JhYmlsaXR5IiwieSIsIndvcmRfZGlzdHJpYnV0aW9uX2luX2NvcnBvcmEiLCJ6IiwidG9waWNfd29yZF9wcm9iYWJpbGl0eSIsImdlbmVyYXRlVG9waWNWZWN0b3JzIiwibG9hZFZpc3VhbGl6YXRpb25zIiwiaW5pdFBhZ2UxIiwiaW5pdFBhZ2UyIiwiaW5pdFBhZ2UzIiwibG9hZFBhcmFsbGVsQ29vcmRpbmF0ZSIsImdldDJEVmVjdG9ycyIsInZlY3RvcnMiLCJzdWNjZXNzQ2FsbGJhY2siLCJyZXF1ZXN0IiwiYWpheCIsInVybCIsIm1ldGhvZCIsImRhdGEiLCJkb25lIiwicmVzcG9uc2UiLCJmYWlsIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiYWxlcnQiLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlIiwib3JkaW5hbCIsInJhbmdlUG9pbnRzIiwiZHJhZ2dpbmciLCJsaW5lIiwic3ZnIiwiYXhpcyIsIm9yaWVudCIsImJhY2tncm91bmQiLCJmb3JlZ3JvdW5kIiwic2VsZWN0IiwiYXBwZW5kIiwiYXR0ciIsImVycm9yIiwiY2FycyIsImRvbWFpbiIsImRpbWVuc2lvbnMiLCJrZXlzIiwiZmlsdGVyIiwiZCIsImxpbmVhciIsImV4dGVudCIsInAiLCJyYW5nZSIsInNlbGVjdEFsbCIsImVudGVyIiwicGF0aCIsImciLCJjYWxsIiwiYmVoYXZpb3IiLCJkcmFnIiwib3JpZ2luIiwib24iLCJNYXRoIiwibWluIiwibWF4IiwiZXZlbnQiLCJzb3J0IiwiYSIsImIiLCJwb3NpdGlvbiIsInRyYW5zaXRpb24iLCJkZWxheSIsImR1cmF0aW9uIiwiZWFjaCIsInN0eWxlIiwidGV4dCIsImJydXNoIiwiYnJ1c2hzdGFydCIsInYiLCJtYXAiLCJzb3VyY2VFdmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImFjdGl2ZXMiLCJlbXB0eSIsImV4dGVudHMiLCJldmVyeSIsImkiLCJ0b3BpY1ZlY3RvcnMiLCJ0b3BpY193b3JkX3Byb2JhYmlsaXR5X2luX3RvcGljIiwidmVjdG9yIiwicHVzaCIsImdlbmVyYXRlUGFyYWxsZWxDb29yZGluYXRlRGF0YSIsIndvcmRzIiwidG9waWNfd29yZF90aHJlc2hvbGQiLCJ2dWVBcHAiLCJWdWUiLCJlbCIsIm1lc3NhZ2UiLCJub25lU2VsZWN0ZWQiLCJzZWxlY3RlZFBhZ2UiLCJwbGF5ZXJEZXRhaWwiLCJuYW1lIiwib3ZlcnZpZXdGaWx0ZXJzIiwic2VsZWN0ZWRNYXAiLCJtZXRob2RzIiwic2VsZWN0UGFnZSIsIm1vdW50ZWQiXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBU0EsVUFBVCxHQUFxQjtBQUNqQkMsRUFBQUEsQ0FBQyxDQUFDQyxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFVO0FBQ3hCRixJQUFBQSxDQUFDLENBQUMsaUJBQUQsQ0FBRCxDQUFxQkcsS0FBckIsQ0FBMkIsWUFBVTtBQUNqQ0gsTUFBQUEsQ0FBQyxDQUFDLGFBQUQsQ0FBRCxDQUNLSSxPQURMLENBQ2EsUUFEYjtBQUdILEtBSkQ7QUFNSCxHQVBEO0FBUUg7OztBQ1RELFNBQVNDLE1BQVQsR0FBaUI7QUFDYkMsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksT0FBWjtBQUNBQyxFQUFBQSxFQUFFLENBQUNDLEdBQUgsQ0FBTyxzQ0FBUCxFQUErQyxVQUFTQyxDQUFULEVBQVc7QUFDdERDLElBQUFBLE1BQU0sQ0FBQ0MsMEJBQVAsR0FBbUNGLENBQW5DO0FBQ0FGLElBQUFBLEVBQUUsQ0FBQ0MsR0FB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LEtBSlo7QUFPRkMsSUFBQUEsZUFBZSxFQUFFLEVBUGY7QUFRRkMsSUFBQUEsV0FBVyxFQUFFO0FBUlgsR0FGYztBQVlwQkMsRUFBQUEsT0FBTyxFQUFFO0FBQ0xDLElBQUFBLFVBQVUsRUFBRSxvQkFBUzlHLENBQVQsRUFBVztBQUNuQixXQUFLd0csWUFBTCxHQUFvQnhHLENBQXBCOztBQUNBLFVBQUlBLENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFMsUUFBQUEsU0FBUztBQUNaOztBQUNELFVBQUlULENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFUsUUFBQUEsU0FBUztBQUNaOztBQUNELFVBQUlWLENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFcsUUFBQUEsU0FBUztBQUNaO0FBQ0o7QUFaSSxHQVpXO0FBMEJwQm9HLEVBQUFBLE9BQU8sRUFBRSxtQkFBVTtBQUNmbkgsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksU0FBWjtBQUNBRixJQUFBQSxNQUFNO0FBQ05OLElBQUFBLFVBQVU7QUFDYjtBQTlCbUIsQ0FBUixDQUFoQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBsb2FkSnF1ZXJ5KCl7XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgICAgICQoXCIjdG9nZ2xlLXNpZGViYXJcIikuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLnVpLnNpZGViYXInKVxyXG4gICAgICAgICAgICAgICAgLnNpZGViYXIoJ3RvZ2dsZScpXHJcbiAgICAgICAgICAgIDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgIH0pO1xyXG59XHJcbiIsImZ1bmN0aW9uIGxvYWREMygpe1xyXG4gICAgY29uc29sZS5sb2coXCJoZWxsb1wiKTtcclxuICAgIGQzLmNzdihcImRhdGEvZG9jdW1lbnRfdG9waWNfcHJvYmFiaWxpdHkuanNvblwiLCBmdW5jdGlvbih4KXtcclxuICAgICAgICB3aW5kb3cuZG9jdW1lbnRfdG9waWNfcHJvYmFiaWxpdHk9IHg7XHJcbiAgICAgICAgZDMuY3N2KFwiZGF0YS90b3BpY193b3JkX2Rpc3RyaWJ1dGlvbl9pbl9jb3Jwb3JhLmpzb25cIiwgZnVuY3Rpb24oeSl7XHJcbiAgICAgICAgICAgIHdpbmRvdy53b3JkX2Rpc3RyaWJ1dGlvbl9pbl9jb3Jwb3JhPSB5O1xyXG4gICAgICAgICAgICBkMy5jc3YoXCJkYXRhL3RvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWMuanNvblwiLCBmdW5jdGlvbih6KXtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy50b3BpY193b3JkX3Byb2JhYmlsaXR5ID0gejtcclxuICAgICAgICAgICAgICAgIGdlbmVyYXRlVG9waWNWZWN0b3JzKCk7IC8vTG9hZHMgdmVjdG9ycyBpbiB3aW5kb3cudG9waWNWZWN0b3JzXHJcbiAgICAgICAgICAgICAgICBsb2FkVmlzdWFsaXphdGlvbnMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFZpc3VhbGl6YXRpb25zKCl7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0UGFnZTEoKXtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRQYWdlMigpe1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFBhZ2UzKCl7XHJcbiAgICBsb2FkUGFyYWxsZWxDb29yZGluYXRlKCk7XHJcbn0iLCJmdW5jdGlvbiBnZXQyRFZlY3RvcnModmVjdG9ycywgc3VjY2Vzc0NhbGxiYWNrKXtcclxuICAgIHZhciByZXF1ZXN0ID0gJC5hamF4KHtcclxuICAgICAgICB1cmw6IFwiL2dldDJEVmVjdG9yc1wiLFxyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgZGF0YTogdmVjdG9yc1xyXG4gICAgICB9KTtcclxuICAgICAgIFxyXG4gICAgICByZXF1ZXN0LmRvbmUoZnVuY3Rpb24oIHJlc3BvbnNlICkge1xyXG4gICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAgXHJcbiAgICAgIHJlcXVlc3QuZmFpbChmdW5jdGlvbigganFYSFIsIHRleHRTdGF0dXMgKSB7XHJcbiAgICAgICAgYWxlcnQoIFwiUmVxdWVzdCBmYWlsZWQ6IFwiICsgdGV4dFN0YXR1cyApO1xyXG4gICAgICB9KTtcclxufVxyXG5cclxuIiwiZnVuY3Rpb24gbG9hZFBhcmFsbGVsQ29vcmRpbmF0ZSgpe1xyXG4gICAgdmFyIG1hcmdpbiA9IHt0b3A6IDMwLCByaWdodDogMTAsIGJvdHRvbTogMTAsIGxlZnQ6IDEwfSxcclxuICAgICAgICB3aWR0aCA9IDk2MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxyXG4gICAgICAgIGhlaWdodCA9IDUwMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xyXG5cclxuICAgIHZhciB4ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlUG9pbnRzKFswLCB3aWR0aF0sIDEpLFxyXG4gICAgICAgIHkgPSB7fSxcclxuICAgICAgICBkcmFnZ2luZyA9IHt9O1xyXG5cclxuICAgIHZhciBsaW5lID0gZDMuc3ZnLmxpbmUoKSxcclxuICAgICAgICBheGlzID0gZDMuc3ZnLmF4aXMoKS5vcmllbnQoXCJsZWZ0XCIpLFxyXG4gICAgICAgIGJhY2tncm91bmQsXHJcbiAgICAgICAgZm9yZWdyb3VuZDtcclxuXHJcbiAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIilcclxuICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgZDMuY3N2KFwiY2Fycy5jc3ZcIiwgZnVuY3Rpb24oZXJyb3IsIGNhcnMpIHtcclxuXHJcbiAgICAvLyBFeHRyYWN0IHRoZSBsaXN0IG9mIGRpbWVuc2lvbnMgYW5kIGNyZWF0ZSBhIHNjYWxlIGZvciBlYWNoLlxyXG4gICAgeC5kb21haW4oZGltZW5zaW9ucyA9IGQzLmtleXMoY2Fyc1swXSkuZmlsdGVyKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICByZXR1cm4gZCAhPSBcIm5hbWVcIiAmJiAoeVtkXSA9IGQzLnNjYWxlLmxpbmVhcigpXHJcbiAgICAgICAgICAgIC5kb21haW4oZDMuZXh0ZW50KGNhcnMsIGZ1bmN0aW9uKHApIHsgcmV0dXJuICtwW2RdOyB9KSlcclxuICAgICAgICAgICAgLnJhbmdlKFtoZWlnaHQsIDBdKSk7XHJcbiAgICB9KSk7XHJcblxyXG4gICAgLy8gQWRkIGdyZXkgYmFja2dyb3VuZCBsaW5lcyBmb3IgY29udGV4dC5cclxuICAgIGJhY2tncm91bmQgPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJiYWNrZ3JvdW5kXCIpXHJcbiAgICAgICAgLnNlbGVjdEFsbChcInBhdGhcIilcclxuICAgICAgICAuZGF0YShjYXJzKVxyXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcInBhdGhcIilcclxuICAgICAgICAuYXR0cihcImRcIiwgcGF0aCk7XHJcblxyXG4gICAgLy8gQWRkIGJsdWUgZm9yZWdyb3VuZCBsaW5lcyBmb3IgZm9jdXMuXHJcbiAgICBmb3JlZ3JvdW5kID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZm9yZWdyb3VuZFwiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJwYXRoXCIpXHJcbiAgICAgICAgLmRhdGEoY2FycylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpO1xyXG5cclxuICAgIC8vIEFkZCBhIGdyb3VwIGVsZW1lbnQgZm9yIGVhY2ggZGltZW5zaW9uLlxyXG4gICAgdmFyIGcgPSBzdmcuc2VsZWN0QWxsKFwiLmRpbWVuc2lvblwiKVxyXG4gICAgICAgIC5kYXRhKGRpbWVuc2lvbnMpXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJkaW1lbnNpb25cIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgoZCkgKyBcIilcIjsgfSlcclxuICAgICAgICAuY2FsbChkMy5iZWhhdmlvci5kcmFnKClcclxuICAgICAgICAgICAgLm9yaWdpbihmdW5jdGlvbihkKSB7IHJldHVybiB7eDogeChkKX07IH0pXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nW2RdID0geChkKTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC5hdHRyKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nW2RdID0gTWF0aC5taW4od2lkdGgsIE1hdGgubWF4KDAsIGQzLmV2ZW50LngpKTtcclxuICAgICAgICAgICAgZm9yZWdyb3VuZC5hdHRyKFwiZFwiLCBwYXRoKTtcclxuICAgICAgICAgICAgZGltZW5zaW9ucy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIHBvc2l0aW9uKGEpIC0gcG9zaXRpb24oYik7IH0pO1xyXG4gICAgICAgICAgICB4LmRvbWFpbihkaW1lbnNpb25zKTtcclxuICAgICAgICAgICAgZy5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgcG9zaXRpb24oZCkgKyBcIilcIjsgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBkcmFnZ2luZ1tkXTtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbihkMy5zZWxlY3QodGhpcykpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB4KGQpICsgXCIpXCIpO1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uKGZvcmVncm91bmQpLmF0dHIoXCJkXCIsIHBhdGgpO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgcGF0aClcclxuICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgIC5kZWxheSg1MDApXHJcbiAgICAgICAgICAgICAgICAuZHVyYXRpb24oMClcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwidmlzaWJpbGl0eVwiLCBudWxsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgIC8vIEFkZCBhbiBheGlzIGFuZCB0aXRsZS5cclxuICAgIGcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJheGlzXCIpXHJcbiAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkgeyBkMy5zZWxlY3QodGhpcykuY2FsbChheGlzLnNjYWxlKHlbZF0pKTsgfSlcclxuICAgICAgICAuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ5XCIsIC05KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG5cclxuICAgIC8vIEFkZCBhbmQgc3RvcmUgYSBicnVzaCBmb3IgZWFjaCBheGlzLlxyXG4gICAgZy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJydXNoXCIpXHJcbiAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2FsbCh5W2RdLmJydXNoID0gZDMuc3ZnLmJydXNoKCkueSh5W2RdKS5vbihcImJydXNoc3RhcnRcIiwgYnJ1c2hzdGFydCkub24oXCJicnVzaFwiLCBicnVzaCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNlbGVjdEFsbChcInJlY3RcIilcclxuICAgICAgICAuYXR0cihcInhcIiwgLTgpXHJcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCAxNik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBwb3NpdGlvbihkKSB7XHJcbiAgICB2YXIgdiA9IGRyYWdnaW5nW2RdO1xyXG4gICAgcmV0dXJuIHYgPT0gbnVsbCA/IHgoZCkgOiB2O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRyYW5zaXRpb24oZykge1xyXG4gICAgcmV0dXJuIGcudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyB0aGUgcGF0aCBmb3IgYSBnaXZlbiBkYXRhIHBvaW50LlxyXG4gICAgZnVuY3Rpb24gcGF0aChkKSB7XHJcbiAgICByZXR1cm4gbGluZShkaW1lbnNpb25zLm1hcChmdW5jdGlvbihwKSB7IHJldHVybiBbcG9zaXRpb24ocCksIHlbcF0oZFtwXSldOyB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYnJ1c2hzdGFydCgpIHtcclxuICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhbmRsZXMgYSBicnVzaCBldmVudCwgdG9nZ2xpbmcgdGhlIGRpc3BsYXkgb2YgZm9yZWdyb3VuZCBsaW5lcy5cclxuICAgIGZ1bmN0aW9uIGJydXNoKCkge1xyXG4gICAgdmFyIGFjdGl2ZXMgPSBkaW1lbnNpb25zLmZpbHRlcihmdW5jdGlvbihwKSB7IHJldHVybiAheVtwXS5icnVzaC5lbXB0eSgpOyB9KSxcclxuICAgICAgICBleHRlbnRzID0gYWN0aXZlcy5tYXAoZnVuY3Rpb24ocCkgeyByZXR1cm4geVtwXS5icnVzaC5leHRlbnQoKTsgfSk7XHJcbiAgICBmb3JlZ3JvdW5kLnN0eWxlKFwiZGlzcGxheVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZXMuZXZlcnkoZnVuY3Rpb24ocCwgaSkge1xyXG4gICAgICAgIHJldHVybiBleHRlbnRzW2ldWzBdIDw9IGRbcF0gJiYgZFtwXSA8PSBleHRlbnRzW2ldWzFdO1xyXG4gICAgICAgIH0pID8gbnVsbCA6IFwibm9uZVwiO1xyXG4gICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiZnVuY3Rpb24gZ2VuZXJhdGVUb3BpY1ZlY3RvcnMoKXtcclxuICAgIHdpbmRvdy50b3BpY1ZlY3RvcnMgPSB7fTtcclxuICAgIGlmKHdpbmRvdy50b3BpY193b3JkX3Byb2JhYmlsaXR5X2luX3RvcGljKXtcclxuICAgICAgICBmb3IodmFyIHggaW4gd2luZG93LnRvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWMpe1xyXG4gICAgICAgICAgICB2YXIgdmVjdG9yID0gW107XHJcbiAgICAgICAgICAgIGZvcih2YXIgeSBpbiB3aW5kb3cudG9waWNfd29yZF9wcm9iYWJpbGl0eV9pbl90b3BpY1t4XSl7XHJcbiAgICAgICAgICAgICAgICB2ZWN0b3IucHVzaCh3aW5kb3cudG9waWNfd29yZF9wcm9iYWJpbGl0eV9pbl90b3BpY1t4XVt5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2luZG93LnRvcGljVmVjdG9yc1t4XSA9IHZlY3RvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUGFyYWxsZWxDb29yZGluYXRlRGF0YSgpe1xyXG4gICAgdmFyIHdvcmRzID0gd2luZG93LndvcmRfZGlzdHJpYnV0aW9uX2luX2NvcnBvcmEua2V5cygpO1xyXG4gICAgdmFyIHRvcGljX3dvcmRfdGhyZXNob2xkID0gMC4zO1xyXG5cclxufVxyXG5cclxuIiwid2luZG93LnZ1ZUFwcCA9IG5ldyBWdWUoe1xyXG4gICAgZWw6ICcjdnVlLWFwcCcsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgbWVzc2FnZTogJ0hlbGxvIHVzZXIhJyxcclxuICAgICAgICBub25lU2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgc2VsZWN0ZWRQYWdlOiAxLFxyXG4gICAgICAgIHBsYXllckRldGFpbDoge1xyXG4gICAgICAgICAgICBuYW1lOiBcIjxQbGF5ZXIgTmFtZT5cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3ZlcnZpZXdGaWx0ZXJzOiB7fSxcclxuICAgICAgICBzZWxlY3RlZE1hcDogMVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBzZWxlY3RQYWdlOiBmdW5jdGlvbih4KXtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFBhZ2UgPSB4O1xyXG4gICAgICAgICAgICBpZiAoeCA9PSAxKXtcclxuICAgICAgICAgICAgICAgIGluaXRQYWdlMSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh4ID09IDIpe1xyXG4gICAgICAgICAgICAgICAgaW5pdFBhZ2UyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPT0gMyl7XHJcbiAgICAgICAgICAgICAgICBpbml0UGFnZTMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTW91bnRlZFwiKTtcclxuICAgICAgICBsb2FkRDMoKTtcclxuICAgICAgICBsb2FkSnF1ZXJ5KCk7XHJcbiAgICB9XHJcbn0pOyJdfQ==
