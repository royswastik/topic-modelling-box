"use strict";

function loadJquery() {
  $(document).ready(function () {
    $("#toggle-sidebar").click(function () {
      $('.ui.sidebar').sidebar('toggle');
    });
  });
}
"use strict";

function loadD3() {
  console.log("hello");
  d3.json("data/document_topic_probability.json", function (x) {
    window.document_topic_probability = x;
    d3.json("data/topic_word_distribution_in_corpora.json", function (y) {
      window.word_distribution_in_corpora = y;
      d3.json("data/topic_word_probability_in_topic.json", function (z) {
        window.topic_word_probability = z;
        generateTopicVectors(); //Loads vectors in window.topicVectors

        loadVisualizations();
      });
    });
  });
}

function loadVisualizations() {}

function initPage1() {}

function initPage2() {}

function initPage3() {
  loadParallelCoordinate();
}
"use strict";

function get2DVectors(vectors, successCallback) {
  var request = $.ajax({
    url: "/get2DVectors",
    method: "POST",
    data: vectors
  });
  request.done(function (response) {
    successCallback(response);
  });
  request.fail(function (jqXHR, textStatus) {
    alert("Request failed: " + textStatus);
  });
}
"use strict";

function loadParallelCoordinate() {
  var margin = {
    top: 30,
    right: 10,
    bottom: 10,
    left: 10
  },
      width = 960 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;
  var x = d3.scale.ordinal().rangePoints([0, width], 1),
      y = {},
      dragging = {};
  var line = d3.svg.line(),
      axis = d3.svg.axis().orient("left"),
      background,
      foreground;
  var svg = d3.select("body").append("svg").attr("width", width + margin.left + margin.right).attr("height", height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  d3.csv("cars.csv", function (error, cars) {
    // Extract the list of dimensions and create a scale for each.
    x.domain(dimensions = d3.keys(cars[0]).filter(function (d) {
      return d != "name" && (y[d] = d3.scale.linear().domain(d3.extent(cars, function (p) {
        return +p[d];
      })).range([height, 0]));
    })); // Add grey background lines for context.

    background = svg.append("g").attr("class", "background").selectAll("path").data(cars).enter().append("path").attr("d", path); // Add blue foreground lines for focus.

    foreground = svg.append("g").attr("class", "foreground").selectAll("path").data(cars).enter().append("path").attr("d", path); // Add a group element for each dimension.

    var g = svg.selectAll(".dimension").data(dimensions).enter().append("g").attr("class", "dimension").attr("transform", function (d) {
      return "translate(" + x(d) + ")";
    }).call(d3.behavior.drag().origin(function (d) {
      return {
        x: x(d)
      };
    }).on("dragstart", function (d) {
      dragging[d] = x(d);
      background.attr("visibility", "hidden");
    }).on("drag", function (d) {
      dragging[d] = Math.min(width, Math.max(0, d3.event.x));
      foreground.attr("d", path);
      dimensions.sort(function (a, b) {
        return position(a) - position(b);
      });
      x.domain(dimensions);
      g.attr("transform", function (d) {
        return "translate(" + position(d) + ")";
      });
    }).on("dragend", function (d) {
      delete dragging[d];
      transition(d3.select(this)).attr("transform", "translate(" + x(d) + ")");
      transition(foreground).attr("d", path);
      background.attr("d", path).transition().delay(500).duration(0).attr("visibility", null);
    })); // Add an axis and title.

    g.append("g").attr("class", "axis").each(function (d) {
      d3.select(this).call(axis.scale(y[d]));
    }).append("text").style("text-anchor", "middle").attr("y", -9).text(function (d) {
      return d;
    }); // Add and store a brush for each axis.

    g.append("g").attr("class", "brush").each(function (d) {
      d3.select(this).call(y[d].brush = d3.svg.brush().y(y[d]).on("brushstart", brushstart).on("brush", brush));
    }).selectAll("rect").attr("x", -8).attr("width", 16);
  });

  function position(d) {
    var v = dragging[d];
    return v == null ? x(d) : v;
  }

  function transition(g) {
    return g.transition().duration(500);
  } // Returns the path for a given data point.


  function path(d) {
    return line(dimensions.map(function (p) {
      return [position(p), y[p](d[p])];
    }));
  }

  function brushstart() {
    d3.event.sourceEvent.stopPropagation();
  } // Handles a brush event, toggling the display of foreground lines.


  function brush() {
    var actives = dimensions.filter(function (p) {
      return !y[p].brush.empty();
    }),
        extents = actives.map(function (p) {
      return y[p].brush.extent();
    });
    foreground.style("display", function (d) {
      return actives.every(function (p, i) {
        return extents[i][0] <= d[p] && d[p] <= extents[i][1];
      }) ? null : "none";
    });
  }
}
"use strict";

function generateTopicVectors() {
  window.topicVectors = {};

  if (window.topic_word_probability_in_topic) {
    for (var x in window.topic_word_probability_in_topic) {
      var vector = [];

      for (var y in window.topic_word_probability_in_topic[x]) {
        vector.push(window.topic_word_probability_in_topic[x][y]);
      }

      window.topicVectors[x] = vector;
    }
  }
}

function generateParallelCoordinateData() {
  var words = window.word_distribution_in_corpora.keys();
  var topic_word_threshold = 0.3;
  window.topic_word_probability.map(function (x) {});
}
"use strict";

window.vueApp = new Vue({
  el: '#vue-app',
  data: {
    message: 'Hello user!',
    noneSelected: true,
    selectedPage: 1,
    playerDetail: {
      name: "<Player Name>"
    },
    overviewFilters: {},
    selectedMap: 1
  },
  methods: {
    selectPage: function selectPage(x) {
      this.selectedPage = x;

      if (x == 1) {
        initPage1();
      }

      if (x == 2) {
        initPage2();
      }

      if (x == 3) {
        initPage3();
      }
    }
  },
  mounted: function mounted() {
    console.log("Mounted");
    loadD3();
    loadJquery();
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50cy5qcyIsIm1haW4uanMiLCJuZXR3b3JrLmpzIiwicGFyYWxsZWwtY29vcmRpbmF0ZS5qcyIsInV0aWwuanMiLCJ2dWVfbW9kZWwuanMiXSwibmFtZXMiOlsibG9hZEpxdWVyeSIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiY2xpY2siLCJzaWRlYmFyIiwibG9hZEQzIiwiY29uc29sZSIsImxvZyIsImQzIiwianNvbiIsIngiLCJ3aW5kb3ciLCJkb2N1bWVudF90b3BpY19wcm9iYWJpbGl0eSIsInkiLCJ3b3JkX2Rpc3RyaWJ1dGlvbl9pbl9jb3Jwb3JhIiwieiIsInRvcGljX3dvcmRfcHJvYmFiaWxpdHkiLCJnZW5lcmF0ZVRvcGljVmVjdG9ycyIsImxvYWRWaXN1YWxpemF0aW9ucyIsImluaXRQYWdlMSIsImluaXRQYWdlMiIsImluaXRQYWdlMyIsImxvYWRQYXJhbGxlbENvb3JkaW5hdGUiLCJnZXQyRFZlY3RvcnMiLCJ2ZWN0b3JzIiwic3VjY2Vzc0NhbGxiYWNrIiwicmVxdWVzdCIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwiZG9uZSIsInJlc3BvbnNlIiwiZmFpbCIsImpxWEhSIiwidGV4dFN0YXR1cyIsImFsZXJ0IiwibWFyZ2luIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJsZWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJzY2FsZSIsIm9yZGluYWwiLCJyYW5nZVBvaW50cyIsImRyYWdnaW5nIiwibGluZSIsInN2ZyIsImF4aXMiLCJvcmllbnQiLCJiYWNrZ3JvdW5kIiwiZm9yZWdyb3VuZCIsInNlbGVjdCIsImFwcGVuZCIsImF0dHIiLCJjc3YiLCJlcnJvciIsImNhcnMiLCJkb21haW4iLCJkaW1lbnNpb25zIiwia2V5cyIsImZpbHRlciIsImQiLCJsaW5lYXIiLCJleHRlbnQiLCJwIiwicmFuZ2UiLCJzZWxlY3RBbGwiLCJlbnRlciIsInBhdGgiLCJnIiwiY2FsbCIsImJlaGF2aW9yIiwiZHJhZyIsIm9yaWdpbiIsIm9uIiwiTWF0aCIsIm1pbiIsIm1heCIsImV2ZW50Iiwic29ydCIsImEiLCJiIiwicG9zaXRpb24iLCJ0cmFuc2l0aW9uIiwiZGVsYXkiLCJkdXJhdGlvbiIsImVhY2giLCJzdHlsZSIsInRleHQiLCJicnVzaCIsImJydXNoc3RhcnQiLCJ2IiwibWFwIiwic291cmNlRXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJhY3RpdmVzIiwiZW1wdHkiLCJleHRlbnRzIiwiZXZlcnkiLCJpIiwidG9waWNWZWN0b3JzIiwidG9waWNfd29yZF9wcm9iYWJpbGl0eV9pbl90b3BpYyIsInZlY3RvciIsInB1c2giLCJnZW5lcmF0ZVBhcmFsbGVsQ29vcmRpbmF0ZURhdGEiLCJ3b3JkcyIsInRvcGljX3dvcmRfdGhyZXNob2xkIiwidnVlQXBwIiwiVnVlIiwiZWwiLCJtZXNzYWdlIiwibm9uZVNlbGVjdGVkIiwic2VsZWN0ZWRQYWdlIiwicGxheWVyRGV0YWlsIiwibmFtZSIsIm92ZXJ2aWV3RmlsdGVycyIsInNlbGVjdGVkTWFwIiwibWV0aG9kcyIsInNlbGVjdFBhZ2UiLCJtb3VudGVkIl0sIm1hcHBpbmdzIjoiOztBQUFBLFNBQVNBLFVBQVQsR0FBcUI7QUFDakJDLEVBQUFBLENBQUMsQ0FBQ0MsUUFBRCxDQUFELENBQVlDLEtBQVosQ0FBa0IsWUFBVTtBQUN4QkYsSUFBQUEsQ0FBQyxDQUFDLGlCQUFELENBQUQsQ0FBcUJHLEtBQXJCLENBQTJCLFlBQVU7QUFDakNILE1BQUFBLENBQUMsQ0FBQyxhQUFELENBQUQsQ0FDS0ksT0FETCxDQUNhLFFBRGI7QUFHSCxLQUpEO0FBTUgsR0FQRDtBQVFIOzs7QUNURCxTQUFTQyxNQUFULEdBQWlCO0FBQ2JDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLE9BQVo7QUFDQUMsRUFBQUEsRUFBRSxDQUFDQyxJQUFILENBQVEsc0NBQVIsRUFBZ0QsVUFBU0MsQ0FBVCxFQUFXO0FBQ3ZEQyxJQUFBQSxNQUFNLENBQUNDLDBCQUFQLEdBQW1DRixDQUFuQztBQUNBRixJQUFBQSxFQUFFLENBQUNDLElBQUgsQ0FBUSw4Q0FBUixFQUF3RCxVQUFTSSxDQUFULEVBQVc7QUFDL0RGLE1BQUFBLE1BQU0sQ0FBQ0csNEJBQVAsR0FBcUNELENBQXJDO0FBQ0FMLE1BQUFBLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRLDJDQUFSLEVBQXFELFVBQVNNLENBQVQsRUFBVztBQUM1REosUUFBQUEsTUFBTSxDQUFDSyxzQkFBUCxHQUFnQ0QsQ0FBaEM7QUFDQUUsUUFBQUEsb0JBQW9CLEdBRndDLENBRXBDOztBQUN4QkMsUUFBQUEsa0JBQWtCO0FBQ3JCLE9BSkQ7QUFLSCxLQVBEO0FBUUgsR0FWRDtBQVdIOztBQUVELFNBQVNBLGtCQUFULEdBQTZCLENBRTVCOztBQUVELFNBQVNDLFNBQVQsR0FBb0IsQ0FFbkI7O0FBRUQsU0FBU0MsU0FBVCxHQUFvQixDQUVuQjs7QUFFRCxTQUFTQyxTQUFULEdBQW9CO0FBQ2hCQyxFQUFBQSxzQkFBc0I7QUFDekI7OztBQzdCRCxTQUFTQyxZQUFULENBQXNCQyxPQUF0QixFQUErQkMsZUFBL0IsRUFBK0M7QUFDM0MsTUFBSUMsT0FBTyxHQUFHMUIsQ0FBQyxDQUFDMkIsSUFBRixDQUFPO0FBQ2pCQyxJQUFBQSxHQUFHLEVBQUUsZUFEWTtBQUVqQkMsSUFBQUEsTUFBTSxFQUFFLE1BRlM7QUFHakJDLElBQUFBLElBQUksRUFBRU47QUFIVyxHQUFQLENBQWQ7QUFNRUUsRUFBQUEsT0FBTyxDQUFDSyxJQUFSLENBQWEsVUFBVUMsUUFBVixFQUFxQjtBQUNoQ1AsSUFBQUEsZUFBZSxDQUFDTyxRQUFELENBQWY7QUFDRCxHQUZEO0FBSUFOLEVBQUFBLE9BQU8sQ0FBQ08sSUFBUixDQUFhLFVBQVVDLEtBQVYsRUFBaUJDLFVBQWpCLEVBQThCO0FBQ3pDQyxJQUFBQSxLQUFLLENBQUUscUJBQXFCRCxVQUF2QixDQUFMO0FBQ0QsR0FGRDtBQUdMOzs7QUNkRCxTQUFTYixzQkFBVCxHQUFpQztBQUM3QixNQUFJZSxNQUFNLEdBQUc7QUFBQ0MsSUFBQUEsR0FBRyxFQUFFLEVBQU47QUFBVUMsSUFBQUEsS0FBSyxFQUFFLEVBQWpCO0FBQXFCQyxJQUFBQSxNQUFNLEVBQUUsRUFBN0I7QUFBaUNDLElBQUFBLElBQUksRUFBRTtBQUF2QyxHQUFiO0FBQUEsTUFDSUMsS0FBSyxHQUFHLE1BQU1MLE1BQU0sQ0FBQ0ksSUFBYixHQUFvQkosTUFBTSxDQUFDRSxLQUR2QztBQUFBLE1BRUlJLE1BQU0sR0FBRyxNQUFNTixNQUFNLENBQUNDLEdBQWIsR0FBbUJELE1BQU0sQ0FBQ0csTUFGdkM7QUFJQSxNQUFJOUIsQ0FBQyxHQUFHRixFQUFFLENBQUNvQyxLQUFILENBQVNDLE9BQVQsR0FBbUJDLFdBQW5CLENBQStCLENBQUMsQ0FBRCxFQUFJSixLQUFKLENBQS9CLEVBQTJDLENBQTNDLENBQVI7QUFBQSxNQUNJN0IsQ0FBQyxHQUFHLEVBRFI7QUFBQSxNQUVJa0MsUUFBUSxHQUFHLEVBRmY7QUFJQSxNQUFJQyxJQUFJLEdBQUd4QyxFQUFFLENBQUN5QyxHQUFILENBQU9ELElBQVAsRUFBWDtBQUFBLE1BQ0lFLElBQUksR0FBRzFDLEVBQUUsQ0FBQ3lDLEdBQUgsQ0FBT0MsSUFBUCxHQUFjQyxNQUFkLENBQXFCLE1BQXJCLENBRFg7QUFBQSxNQUVJQyxVQUZKO0FBQUEsTUFHSUMsVUFISjtBQUtBLE1BQUlKLEdBQUcsR0FBR3pDLEVBQUUsQ0FBQzhDLE1BQUgsQ0FBVSxNQUFWLEVBQWtCQyxNQUFsQixDQUF5QixLQUF6QixFQUNMQyxJQURLLENBQ0EsT0FEQSxFQUNTZCxLQUFLLEdBQUdMLE1BQU0sQ0FBQ0ksSUFBZixHQUFzQkosTUFBTSxDQUFDRSxLQUR0QyxFQUVMaUIsSUFGSyxDQUVBLFFBRkEsRUFFVWIsTUFBTSxHQUFHTixNQUFNLENBQUNDLEdBQWhCLEdBQXNCRCxNQUFNLENBQUNHLE1BRnZDLEVBR1RlLE1BSFMsQ0FHRixHQUhFLEVBSUxDLElBSkssQ0FJQSxXQUpBLEVBSWEsZUFBZW5CLE1BQU0sQ0FBQ0ksSUFBdEIsR0FBNkIsR0FBN0IsR0FBbUNKLE1BQU0sQ0FBQ0MsR0FBMUMsR0FBZ0QsR0FKN0QsQ0FBVjtBQU1BOUIsRUFBQUEsRUFBRSxDQUFDaUQsR0FBSCxDQUFPLFVBQVAsRUFBbUIsVUFBU0MsS0FBVCxFQUFnQkMsSUFBaEIsRUFBc0I7QUFFekM7QUFDQWpELElBQUFBLENBQUMsQ0FBQ2tELE1BQUYsQ0FBU0MsVUFBVSxHQUFHckQsRUFBRSxDQUFDc0QsSUFBSCxDQUFRSCxJQUFJLENBQUMsQ0FBRCxDQUFaLEVBQWlCSSxNQUFqQixDQUF3QixVQUFTQyxDQUFULEVBQVk7QUFDdEQsYUFBT0EsQ0FBQyxJQUFJLE1BQUwsS0FBZ0JuRCxDQUFDLENBQUNtRCxDQUFELENBQUQsR0FBT3hELEVBQUUsQ0FBQ29DLEtBQUgsQ0FBU3FCLE1BQVQsR0FDekJMLE1BRHlCLENBQ2xCcEQsRUFBRSxDQUFDMEQsTUFBSCxDQUFVUCxJQUFWLEVBQWdCLFVBQVNRLENBQVQsRUFBWTtBQUFFLGVBQU8sQ0FBQ0EsQ0FBQyxDQUFDSCxDQUFELENBQVQ7QUFBZSxPQUE3QyxDQURrQixFQUV6QkksS0FGeUIsQ0FFbkIsQ0FBQ3pCLE1BQUQsRUFBUyxDQUFULENBRm1CLENBQXZCLENBQVA7QUFHSCxLQUpxQixDQUF0QixFQUh5QyxDQVN6Qzs7QUFDQVMsSUFBQUEsVUFBVSxHQUFHSCxHQUFHLENBQUNNLE1BQUosQ0FBVyxHQUFYLEVBQ1JDLElBRFEsQ0FDSCxPQURHLEVBQ00sWUFETixFQUVSYSxTQUZRLENBRUUsTUFGRixFQUdSdkMsSUFIUSxDQUdINkIsSUFIRyxFQUlSVyxLQUpRLEdBSUFmLE1BSkEsQ0FJTyxNQUpQLEVBS1JDLElBTFEsQ0FLSCxHQUxHLEVBS0VlLElBTEYsQ0FBYixDQVZ5QyxDQWlCekM7O0FBQ0FsQixJQUFBQSxVQUFVLEdBQUdKLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFDUkMsSUFEUSxDQUNILE9BREcsRUFDTSxZQUROLEVBRVJhLFNBRlEsQ0FFRSxNQUZGLEVBR1J2QyxJQUhRLENBR0g2QixJQUhHLEVBSVJXLEtBSlEsR0FJQWYsTUFKQSxDQUlPLE1BSlAsRUFLUkMsSUFMUSxDQUtILEdBTEcsRUFLRWUsSUFMRixDQUFiLENBbEJ5QyxDQXlCekM7O0FBQ0EsUUFBSUMsQ0FBQyxHQUFHdkIsR0FBRyxDQUFDb0IsU0FBSixDQUFjLFlBQWQsRUFDSHZDLElBREcsQ0FDRStCLFVBREYsRUFFSFMsS0FGRyxHQUVLZixNQUZMLENBRVksR0FGWixFQUdIQyxJQUhHLENBR0UsT0FIRixFQUdXLFdBSFgsRUFJSEEsSUFKRyxDQUlFLFdBSkYsRUFJZSxVQUFTUSxDQUFULEVBQVk7QUFBRSxhQUFPLGVBQWV0RCxDQUFDLENBQUNzRCxDQUFELENBQWhCLEdBQXNCLEdBQTdCO0FBQW1DLEtBSmhFLEVBS0hTLElBTEcsQ0FLRWpFLEVBQUUsQ0FBQ2tFLFFBQUgsQ0FBWUMsSUFBWixHQUNEQyxNQURDLENBQ00sVUFBU1osQ0FBVCxFQUFZO0FBQUUsYUFBTztBQUFDdEQsUUFBQUEsQ0FBQyxFQUFFQSxDQUFDLENBQUNzRCxDQUFEO0FBQUwsT0FBUDtBQUFtQixLQUR2QyxFQUVEYSxFQUZDLENBRUUsV0FGRixFQUVlLFVBQVNiLENBQVQsRUFBWTtBQUM3QmpCLE1BQUFBLFFBQVEsQ0FBQ2lCLENBQUQsQ0FBUixHQUFjdEQsQ0FBQyxDQUFDc0QsQ0FBRCxDQUFmO0FBQ0FaLE1BQUFBLFVBQVUsQ0FBQ0ksSUFBWCxDQUFnQixZQUFoQixFQUE4QixRQUE5QjtBQUNDLEtBTEMsRUFNRHFCLEVBTkMsQ0FNRSxNQU5GLEVBTVUsVUFBU2IsQ0FBVCxFQUFZO0FBQ3hCakIsTUFBQUEsUUFBUSxDQUFDaUIsQ0FBRCxDQUFSLEdBQWNjLElBQUksQ0FBQ0MsR0FBTCxDQUFTckMsS0FBVCxFQUFnQm9DLElBQUksQ0FBQ0UsR0FBTCxDQUFTLENBQVQsRUFBWXhFLEVBQUUsQ0FBQ3lFLEtBQUgsQ0FBU3ZFLENBQXJCLENBQWhCLENBQWQ7QUFDQTJDLE1BQUFBLFVBQVUsQ0FBQ0csSUFBWCxDQUFnQixHQUFoQixFQUFxQmUsSUFBckI7QUFDQVYsTUFBQUEsVUFBVSxDQUFDcUIsSUFBWCxDQUFnQixVQUFTQyxDQUFULEVBQVlDLENBQVosRUFBZTtBQUFFLGVBQU9DLFFBQVEsQ0FBQ0YsQ0FBRCxDQUFSLEdBQWNFLFFBQVEsQ0FBQ0QsQ0FBRCxDQUE3QjtBQUFtQyxPQUFwRTtBQUNBMUUsTUFBQUEsQ0FBQyxDQUFDa0QsTUFBRixDQUFTQyxVQUFUO0FBQ0FXLE1BQUFBLENBQUMsQ0FBQ2hCLElBQUYsQ0FBTyxXQUFQLEVBQW9CLFVBQVNRLENBQVQsRUFBWTtBQUFFLGVBQU8sZUFBZXFCLFFBQVEsQ0FBQ3JCLENBQUQsQ0FBdkIsR0FBNkIsR0FBcEM7QUFBMEMsT0FBNUU7QUFDQyxLQVpDLEVBYURhLEVBYkMsQ0FhRSxTQWJGLEVBYWEsVUFBU2IsQ0FBVCxFQUFZO0FBQzNCLGFBQU9qQixRQUFRLENBQUNpQixDQUFELENBQWY7QUFDQXNCLE1BQUFBLFVBQVUsQ0FBQzlFLEVBQUUsQ0FBQzhDLE1BQUgsQ0FBVSxJQUFWLENBQUQsQ0FBVixDQUE0QkUsSUFBNUIsQ0FBaUMsV0FBakMsRUFBOEMsZUFBZTlDLENBQUMsQ0FBQ3NELENBQUQsQ0FBaEIsR0FBc0IsR0FBcEU7QUFDQXNCLE1BQUFBLFVBQVUsQ0FBQ2pDLFVBQUQsQ0FBVixDQUF1QkcsSUFBdkIsQ0FBNEIsR0FBNUIsRUFBaUNlLElBQWpDO0FBQ0FuQixNQUFBQSxVQUFVLENBQ0xJLElBREwsQ0FDVSxHQURWLEVBQ2VlLElBRGYsRUFFS2UsVUFGTCxHQUdLQyxLQUhMLENBR1csR0FIWCxFQUlLQyxRQUpMLENBSWMsQ0FKZCxFQUtLaEMsSUFMTCxDQUtVLFlBTFYsRUFLd0IsSUFMeEI7QUFNQyxLQXZCQyxDQUxGLENBQVIsQ0ExQnlDLENBd0R6Qzs7QUFDQWdCLElBQUFBLENBQUMsQ0FBQ2pCLE1BQUYsQ0FBUyxHQUFULEVBQ0tDLElBREwsQ0FDVSxPQURWLEVBQ21CLE1BRG5CLEVBRUtpQyxJQUZMLENBRVUsVUFBU3pCLENBQVQsRUFBWTtBQUFFeEQsTUFBQUEsRUFBRSxDQUFDOEMsTUFBSCxDQUFVLElBQVYsRUFBZ0JtQixJQUFoQixDQUFxQnZCLElBQUksQ0FBQ04sS0FBTCxDQUFXL0IsQ0FBQyxDQUFDbUQsQ0FBRCxDQUFaLENBQXJCO0FBQXlDLEtBRmpFLEVBR0tULE1BSEwsQ0FHWSxNQUhaLEVBSUttQyxLQUpMLENBSVcsYUFKWCxFQUkwQixRQUoxQixFQUtLbEMsSUFMTCxDQUtVLEdBTFYsRUFLZSxDQUFDLENBTGhCLEVBTUttQyxJQU5MLENBTVUsVUFBUzNCLENBQVQsRUFBWTtBQUFFLGFBQU9BLENBQVA7QUFBVyxLQU5uQyxFQXpEeUMsQ0FpRXpDOztBQUNBUSxJQUFBQSxDQUFDLENBQUNqQixNQUFGLENBQVMsR0FBVCxFQUNLQyxJQURMLENBQ1UsT0FEVixFQUNtQixPQURuQixFQUVLaUMsSUFGTCxDQUVVLFVBQVN6QixDQUFULEVBQVk7QUFDZHhELE1BQUFBLEVBQUUsQ0FBQzhDLE1BQUgsQ0FBVSxJQUFWLEVBQWdCbUIsSUFBaEIsQ0FBcUI1RCxDQUFDLENBQUNtRCxDQUFELENBQUQsQ0FBSzRCLEtBQUwsR0FBYXBGLEVBQUUsQ0FBQ3lDLEdBQUgsQ0FBTzJDLEtBQVAsR0FBZS9FLENBQWYsQ0FBaUJBLENBQUMsQ0FBQ21ELENBQUQsQ0FBbEIsRUFBdUJhLEVBQXZCLENBQTBCLFlBQTFCLEVBQXdDZ0IsVUFBeEMsRUFBb0RoQixFQUFwRCxDQUF1RCxPQUF2RCxFQUFnRWUsS0FBaEUsQ0FBbEM7QUFDSCxLQUpMLEVBS0t2QixTQUxMLENBS2UsTUFMZixFQU1LYixJQU5MLENBTVUsR0FOVixFQU1lLENBQUMsQ0FOaEIsRUFPS0EsSUFQTCxDQU9VLE9BUFYsRUFPbUIsRUFQbkI7QUFRQyxHQTFFRDs7QUE0RUEsV0FBUzZCLFFBQVQsQ0FBa0JyQixDQUFsQixFQUFxQjtBQUNyQixRQUFJOEIsQ0FBQyxHQUFHL0MsUUFBUSxDQUFDaUIsQ0FBRCxDQUFoQjtBQUNBLFdBQU84QixDQUFDLElBQUksSUFBTCxHQUFZcEYsQ0FBQyxDQUFDc0QsQ0FBRCxDQUFiLEdBQW1COEIsQ0FBMUI7QUFDQzs7QUFFRCxXQUFTUixVQUFULENBQW9CZCxDQUFwQixFQUF1QjtBQUN2QixXQUFPQSxDQUFDLENBQUNjLFVBQUYsR0FBZUUsUUFBZixDQUF3QixHQUF4QixDQUFQO0FBQ0MsR0F2RzRCLENBeUc3Qjs7O0FBQ0EsV0FBU2pCLElBQVQsQ0FBY1AsQ0FBZCxFQUFpQjtBQUNqQixXQUFPaEIsSUFBSSxDQUFDYSxVQUFVLENBQUNrQyxHQUFYLENBQWUsVUFBUzVCLENBQVQsRUFBWTtBQUFFLGFBQU8sQ0FBQ2tCLFFBQVEsQ0FBQ2xCLENBQUQsQ0FBVCxFQUFjdEQsQ0FBQyxDQUFDc0QsQ0FBRCxDQUFELENBQUtILENBQUMsQ0FBQ0csQ0FBRCxDQUFOLENBQWQsQ0FBUDtBQUFtQyxLQUFoRSxDQUFELENBQVg7QUFDQzs7QUFFRCxXQUFTMEIsVUFBVCxHQUFzQjtBQUN0QnJGLElBQUFBLEVBQUUsQ0FBQ3lFLEtBQUgsQ0FBU2UsV0FBVCxDQUFxQkMsZUFBckI7QUFDQyxHQWhINEIsQ0FrSDdCOzs7QUFDQSxXQUFTTCxLQUFULEdBQWlCO0FBQ2pCLFFBQUlNLE9BQU8sR0FBR3JDLFVBQVUsQ0FBQ0UsTUFBWCxDQUFrQixVQUFTSSxDQUFULEVBQVk7QUFBRSxhQUFPLENBQUN0RCxDQUFDLENBQUNzRCxDQUFELENBQUQsQ0FBS3lCLEtBQUwsQ0FBV08sS0FBWCxFQUFSO0FBQTZCLEtBQTdELENBQWQ7QUFBQSxRQUNJQyxPQUFPLEdBQUdGLE9BQU8sQ0FBQ0gsR0FBUixDQUFZLFVBQVM1QixDQUFULEVBQVk7QUFBRSxhQUFPdEQsQ0FBQyxDQUFDc0QsQ0FBRCxDQUFELENBQUt5QixLQUFMLENBQVcxQixNQUFYLEVBQVA7QUFBNkIsS0FBdkQsQ0FEZDtBQUVBYixJQUFBQSxVQUFVLENBQUNxQyxLQUFYLENBQWlCLFNBQWpCLEVBQTRCLFVBQVMxQixDQUFULEVBQVk7QUFDcEMsYUFBT2tDLE9BQU8sQ0FBQ0csS0FBUixDQUFjLFVBQVNsQyxDQUFULEVBQVltQyxDQUFaLEVBQWU7QUFDcEMsZUFBT0YsT0FBTyxDQUFDRSxDQUFELENBQVAsQ0FBVyxDQUFYLEtBQWlCdEMsQ0FBQyxDQUFDRyxDQUFELENBQWxCLElBQXlCSCxDQUFDLENBQUNHLENBQUQsQ0FBRCxJQUFRaUMsT0FBTyxDQUFDRSxDQUFELENBQVAsQ0FBVyxDQUFYLENBQXhDO0FBQ0MsT0FGTSxJQUVGLElBRkUsR0FFSyxNQUZaO0FBR0gsS0FKRDtBQUtDO0FBRUo7OztBQzdIRCxTQUFTckYsb0JBQVQsR0FBK0I7QUFDM0JOLEVBQUFBLE1BQU0sQ0FBQzRGLFlBQVAsR0FBc0IsRUFBdEI7O0FBQ0EsTUFBRzVGLE1BQU0sQ0FBQzZGLCtCQUFWLEVBQTBDO0FBQ3RDLFNBQUksSUFBSTlGLENBQVIsSUFBYUMsTUFBTSxDQUFDNkYsK0JBQXBCLEVBQW9EO0FBQ2hELFVBQUlDLE1BQU0sR0FBRyxFQUFiOztBQUNBLFdBQUksSUFBSTVGLENBQVIsSUFBYUYsTUFBTSxDQUFDNkYsK0JBQVAsQ0FBdUM5RixDQUF2QyxDQUFiLEVBQXVEO0FBQ25EK0YsUUFBQUEsTUFBTSxDQUFDQyxJQUFQLENBQVkvRixNQUFNLENBQUM2RiwrQkFBUCxDQUF1QzlGLENBQXZDLEVBQTBDRyxDQUExQyxDQUFaO0FBQ0g7O0FBQ0RGLE1BQUFBLE1BQU0sQ0FBQzRGLFlBQVAsQ0FBb0I3RixDQUFwQixJQUF5QitGLE1BQXpCO0FBQ0g7QUFDSjtBQUNKOztBQUVELFNBQVNFLDhCQUFULEdBQXlDO0FBQ3JDLE1BQUlDLEtBQUssR0FBR2pHLE1BQU0sQ0FBQ0csNEJBQVAsQ0FBb0NnRCxJQUFwQyxFQUFaO0FBQ0EsTUFBSStDLG9CQUFvQixHQUFHLEdBQTNCO0FBQ0FsRyxFQUFBQSxNQUFNLENBQUNLLHNCQUFQLENBQThCK0UsR0FBOUIsQ0FBa0MsVUFBQXJGLENBQUMsRUFBSSxDQUV0QyxDQUZEO0FBSUg7OztBQ3BCREMsTUFBTSxDQUFDbUcsTUFBUCxHQUFnQixJQUFJQyxHQUFKLENBQVE7QUFDcEJDLEVBQUFBLEVBQUUsRUFBRSxVQURnQjtBQUVwQmxGLEVBQUFBLElBQUksRUFBRTtBQUNGbUYsSUFBQUEsT0FBTyxFQUFFLGFBRFA7QUFFRkMsSUFBQUEsWUFBWSxFQUFFLElBRlo7QUFHRkMsSUFBQUEsWUFBWSxFQUFFLENBSFo7QUFJRkMsSUFBQUEsWUFBWSxFQUFFO0FBQ1ZDLE1BQUFBLElBQUksRUFBRTtBQURJLEtBSlo7QUFPRkMsSUFBQUEsZUFBZSxFQUFFLEVBUGY7QUFRRkMsSUFBQUEsV0FBVyxFQUFFO0FBUlgsR0FGYztBQVlwQkMsRUFBQUEsT0FBTyxFQUFFO0FBQ0xDLElBQUFBLFVBQVUsRUFBRSxvQkFBUy9HLENBQVQsRUFBVztBQUNuQixXQUFLeUcsWUFBTCxHQUFvQnpHLENBQXBCOztBQUNBLFVBQUlBLENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFMsUUFBQUEsU0FBUztBQUNaOztBQUNELFVBQUlULENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFUsUUFBQUEsU0FBUztBQUNaOztBQUNELFVBQUlWLENBQUMsSUFBSSxDQUFULEVBQVc7QUFDUFcsUUFBQUEsU0FBUztBQUNaO0FBQ0o7QUFaSSxHQVpXO0FBMEJwQnFHLEVBQUFBLE9BQU8sRUFBRSxtQkFBVTtBQUNmcEgsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksU0FBWjtBQUNBRixJQUFBQSxNQUFNO0FBQ05OLElBQUFBLFVBQVU7QUFDYjtBQTlCbUIsQ0FBUixDQUFoQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBsb2FkSnF1ZXJ5KCl7XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgICAgICQoXCIjdG9nZ2xlLXNpZGViYXJcIikuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLnVpLnNpZGViYXInKVxyXG4gICAgICAgICAgICAgICAgLnNpZGViYXIoJ3RvZ2dsZScpXHJcbiAgICAgICAgICAgIDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgIH0pO1xyXG59XHJcbiIsImZ1bmN0aW9uIGxvYWREMygpe1xyXG4gICAgY29uc29sZS5sb2coXCJoZWxsb1wiKTtcclxuICAgIGQzLmpzb24oXCJkYXRhL2RvY3VtZW50X3RvcGljX3Byb2JhYmlsaXR5Lmpzb25cIiwgZnVuY3Rpb24oeCl7XHJcbiAgICAgICAgd2luZG93LmRvY3VtZW50X3RvcGljX3Byb2JhYmlsaXR5PSB4O1xyXG4gICAgICAgIGQzLmpzb24oXCJkYXRhL3RvcGljX3dvcmRfZGlzdHJpYnV0aW9uX2luX2NvcnBvcmEuanNvblwiLCBmdW5jdGlvbih5KXtcclxuICAgICAgICAgICAgd2luZG93LndvcmRfZGlzdHJpYnV0aW9uX2luX2NvcnBvcmE9IHk7XHJcbiAgICAgICAgICAgIGQzLmpzb24oXCJkYXRhL3RvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWMuanNvblwiLCBmdW5jdGlvbih6KXtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy50b3BpY193b3JkX3Byb2JhYmlsaXR5ID0gejtcclxuICAgICAgICAgICAgICAgIGdlbmVyYXRlVG9waWNWZWN0b3JzKCk7IC8vTG9hZHMgdmVjdG9ycyBpbiB3aW5kb3cudG9waWNWZWN0b3JzXHJcbiAgICAgICAgICAgICAgICBsb2FkVmlzdWFsaXphdGlvbnMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFZpc3VhbGl6YXRpb25zKCl7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0UGFnZTEoKXtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXRQYWdlMigpe1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdFBhZ2UzKCl7XHJcbiAgICBsb2FkUGFyYWxsZWxDb29yZGluYXRlKCk7XHJcbn0iLCJmdW5jdGlvbiBnZXQyRFZlY3RvcnModmVjdG9ycywgc3VjY2Vzc0NhbGxiYWNrKXtcclxuICAgIHZhciByZXF1ZXN0ID0gJC5hamF4KHtcclxuICAgICAgICB1cmw6IFwiL2dldDJEVmVjdG9yc1wiLFxyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgZGF0YTogdmVjdG9yc1xyXG4gICAgICB9KTtcclxuICAgICAgIFxyXG4gICAgICByZXF1ZXN0LmRvbmUoZnVuY3Rpb24oIHJlc3BvbnNlICkge1xyXG4gICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAgXHJcbiAgICAgIHJlcXVlc3QuZmFpbChmdW5jdGlvbigganFYSFIsIHRleHRTdGF0dXMgKSB7XHJcbiAgICAgICAgYWxlcnQoIFwiUmVxdWVzdCBmYWlsZWQ6IFwiICsgdGV4dFN0YXR1cyApO1xyXG4gICAgICB9KTtcclxufVxyXG5cclxuIiwiZnVuY3Rpb24gbG9hZFBhcmFsbGVsQ29vcmRpbmF0ZSgpe1xyXG4gICAgdmFyIG1hcmdpbiA9IHt0b3A6IDMwLCByaWdodDogMTAsIGJvdHRvbTogMTAsIGxlZnQ6IDEwfSxcclxuICAgICAgICB3aWR0aCA9IDk2MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxyXG4gICAgICAgIGhlaWdodCA9IDUwMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xyXG5cclxuICAgIHZhciB4ID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlUG9pbnRzKFswLCB3aWR0aF0sIDEpLFxyXG4gICAgICAgIHkgPSB7fSxcclxuICAgICAgICBkcmFnZ2luZyA9IHt9O1xyXG5cclxuICAgIHZhciBsaW5lID0gZDMuc3ZnLmxpbmUoKSxcclxuICAgICAgICBheGlzID0gZDMuc3ZnLmF4aXMoKS5vcmllbnQoXCJsZWZ0XCIpLFxyXG4gICAgICAgIGJhY2tncm91bmQsXHJcbiAgICAgICAgZm9yZWdyb3VuZDtcclxuXHJcbiAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIilcclxuICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgZDMuY3N2KFwiY2Fycy5jc3ZcIiwgZnVuY3Rpb24oZXJyb3IsIGNhcnMpIHtcclxuXHJcbiAgICAvLyBFeHRyYWN0IHRoZSBsaXN0IG9mIGRpbWVuc2lvbnMgYW5kIGNyZWF0ZSBhIHNjYWxlIGZvciBlYWNoLlxyXG4gICAgeC5kb21haW4oZGltZW5zaW9ucyA9IGQzLmtleXMoY2Fyc1swXSkuZmlsdGVyKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICByZXR1cm4gZCAhPSBcIm5hbWVcIiAmJiAoeVtkXSA9IGQzLnNjYWxlLmxpbmVhcigpXHJcbiAgICAgICAgICAgIC5kb21haW4oZDMuZXh0ZW50KGNhcnMsIGZ1bmN0aW9uKHApIHsgcmV0dXJuICtwW2RdOyB9KSlcclxuICAgICAgICAgICAgLnJhbmdlKFtoZWlnaHQsIDBdKSk7XHJcbiAgICB9KSk7XHJcblxyXG4gICAgLy8gQWRkIGdyZXkgYmFja2dyb3VuZCBsaW5lcyBmb3IgY29udGV4dC5cclxuICAgIGJhY2tncm91bmQgPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJiYWNrZ3JvdW5kXCIpXHJcbiAgICAgICAgLnNlbGVjdEFsbChcInBhdGhcIilcclxuICAgICAgICAuZGF0YShjYXJzKVxyXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcInBhdGhcIilcclxuICAgICAgICAuYXR0cihcImRcIiwgcGF0aCk7XHJcblxyXG4gICAgLy8gQWRkIGJsdWUgZm9yZWdyb3VuZCBsaW5lcyBmb3IgZm9jdXMuXHJcbiAgICBmb3JlZ3JvdW5kID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZm9yZWdyb3VuZFwiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJwYXRoXCIpXHJcbiAgICAgICAgLmRhdGEoY2FycylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpO1xyXG5cclxuICAgIC8vIEFkZCBhIGdyb3VwIGVsZW1lbnQgZm9yIGVhY2ggZGltZW5zaW9uLlxyXG4gICAgdmFyIGcgPSBzdmcuc2VsZWN0QWxsKFwiLmRpbWVuc2lvblwiKVxyXG4gICAgICAgIC5kYXRhKGRpbWVuc2lvbnMpXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJkaW1lbnNpb25cIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgoZCkgKyBcIilcIjsgfSlcclxuICAgICAgICAuY2FsbChkMy5iZWhhdmlvci5kcmFnKClcclxuICAgICAgICAgICAgLm9yaWdpbihmdW5jdGlvbihkKSB7IHJldHVybiB7eDogeChkKX07IH0pXHJcbiAgICAgICAgICAgIC5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nW2RdID0geChkKTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC5hdHRyKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKFwiZHJhZ1wiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nW2RdID0gTWF0aC5taW4od2lkdGgsIE1hdGgubWF4KDAsIGQzLmV2ZW50LngpKTtcclxuICAgICAgICAgICAgZm9yZWdyb3VuZC5hdHRyKFwiZFwiLCBwYXRoKTtcclxuICAgICAgICAgICAgZGltZW5zaW9ucy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIHBvc2l0aW9uKGEpIC0gcG9zaXRpb24oYik7IH0pO1xyXG4gICAgICAgICAgICB4LmRvbWFpbihkaW1lbnNpb25zKTtcclxuICAgICAgICAgICAgZy5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgcG9zaXRpb24oZCkgKyBcIilcIjsgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBkcmFnZ2luZ1tkXTtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbihkMy5zZWxlY3QodGhpcykpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB4KGQpICsgXCIpXCIpO1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uKGZvcmVncm91bmQpLmF0dHIoXCJkXCIsIHBhdGgpO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcImRcIiwgcGF0aClcclxuICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgICAgIC5kZWxheSg1MDApXHJcbiAgICAgICAgICAgICAgICAuZHVyYXRpb24oMClcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwidmlzaWJpbGl0eVwiLCBudWxsKTtcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgIC8vIEFkZCBhbiBheGlzIGFuZCB0aXRsZS5cclxuICAgIGcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJheGlzXCIpXHJcbiAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkgeyBkMy5zZWxlY3QodGhpcykuY2FsbChheGlzLnNjYWxlKHlbZF0pKTsgfSlcclxuICAgICAgICAuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ5XCIsIC05KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG5cclxuICAgIC8vIEFkZCBhbmQgc3RvcmUgYSBicnVzaCBmb3IgZWFjaCBheGlzLlxyXG4gICAgZy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJydXNoXCIpXHJcbiAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2FsbCh5W2RdLmJydXNoID0gZDMuc3ZnLmJydXNoKCkueSh5W2RdKS5vbihcImJydXNoc3RhcnRcIiwgYnJ1c2hzdGFydCkub24oXCJicnVzaFwiLCBicnVzaCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNlbGVjdEFsbChcInJlY3RcIilcclxuICAgICAgICAuYXR0cihcInhcIiwgLTgpXHJcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCAxNik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBwb3NpdGlvbihkKSB7XHJcbiAgICB2YXIgdiA9IGRyYWdnaW5nW2RdO1xyXG4gICAgcmV0dXJuIHYgPT0gbnVsbCA/IHgoZCkgOiB2O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRyYW5zaXRpb24oZykge1xyXG4gICAgcmV0dXJuIGcudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyB0aGUgcGF0aCBmb3IgYSBnaXZlbiBkYXRhIHBvaW50LlxyXG4gICAgZnVuY3Rpb24gcGF0aChkKSB7XHJcbiAgICByZXR1cm4gbGluZShkaW1lbnNpb25zLm1hcChmdW5jdGlvbihwKSB7IHJldHVybiBbcG9zaXRpb24ocCksIHlbcF0oZFtwXSldOyB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYnJ1c2hzdGFydCgpIHtcclxuICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhbmRsZXMgYSBicnVzaCBldmVudCwgdG9nZ2xpbmcgdGhlIGRpc3BsYXkgb2YgZm9yZWdyb3VuZCBsaW5lcy5cclxuICAgIGZ1bmN0aW9uIGJydXNoKCkge1xyXG4gICAgdmFyIGFjdGl2ZXMgPSBkaW1lbnNpb25zLmZpbHRlcihmdW5jdGlvbihwKSB7IHJldHVybiAheVtwXS5icnVzaC5lbXB0eSgpOyB9KSxcclxuICAgICAgICBleHRlbnRzID0gYWN0aXZlcy5tYXAoZnVuY3Rpb24ocCkgeyByZXR1cm4geVtwXS5icnVzaC5leHRlbnQoKTsgfSk7XHJcbiAgICBmb3JlZ3JvdW5kLnN0eWxlKFwiZGlzcGxheVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgcmV0dXJuIGFjdGl2ZXMuZXZlcnkoZnVuY3Rpb24ocCwgaSkge1xyXG4gICAgICAgIHJldHVybiBleHRlbnRzW2ldWzBdIDw9IGRbcF0gJiYgZFtwXSA8PSBleHRlbnRzW2ldWzFdO1xyXG4gICAgICAgIH0pID8gbnVsbCA6IFwibm9uZVwiO1xyXG4gICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiZnVuY3Rpb24gZ2VuZXJhdGVUb3BpY1ZlY3RvcnMoKXtcclxuICAgIHdpbmRvdy50b3BpY1ZlY3RvcnMgPSB7fTtcclxuICAgIGlmKHdpbmRvdy50b3BpY193b3JkX3Byb2JhYmlsaXR5X2luX3RvcGljKXtcclxuICAgICAgICBmb3IodmFyIHggaW4gd2luZG93LnRvcGljX3dvcmRfcHJvYmFiaWxpdHlfaW5fdG9waWMpe1xyXG4gICAgICAgICAgICB2YXIgdmVjdG9yID0gW107XHJcbiAgICAgICAgICAgIGZvcih2YXIgeSBpbiB3aW5kb3cudG9waWNfd29yZF9wcm9iYWJpbGl0eV9pbl90b3BpY1t4XSl7XHJcbiAgICAgICAgICAgICAgICB2ZWN0b3IucHVzaCh3aW5kb3cudG9waWNfd29yZF9wcm9iYWJpbGl0eV9pbl90b3BpY1t4XVt5XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2luZG93LnRvcGljVmVjdG9yc1t4XSA9IHZlY3RvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUGFyYWxsZWxDb29yZGluYXRlRGF0YSgpe1xyXG4gICAgdmFyIHdvcmRzID0gd2luZG93LndvcmRfZGlzdHJpYnV0aW9uX2luX2NvcnBvcmEua2V5cygpO1xyXG4gICAgdmFyIHRvcGljX3dvcmRfdGhyZXNob2xkID0gMC4zO1xyXG4gICAgd2luZG93LnRvcGljX3dvcmRfcHJvYmFiaWxpdHkubWFwKHggPT4ge1xyXG5cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuIiwid2luZG93LnZ1ZUFwcCA9IG5ldyBWdWUoe1xyXG4gICAgZWw6ICcjdnVlLWFwcCcsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgbWVzc2FnZTogJ0hlbGxvIHVzZXIhJyxcclxuICAgICAgICBub25lU2VsZWN0ZWQ6IHRydWUsXHJcbiAgICAgICAgc2VsZWN0ZWRQYWdlOiAxLFxyXG4gICAgICAgIHBsYXllckRldGFpbDoge1xyXG4gICAgICAgICAgICBuYW1lOiBcIjxQbGF5ZXIgTmFtZT5cIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3ZlcnZpZXdGaWx0ZXJzOiB7fSxcclxuICAgICAgICBzZWxlY3RlZE1hcDogMVxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBzZWxlY3RQYWdlOiBmdW5jdGlvbih4KXtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFBhZ2UgPSB4O1xyXG4gICAgICAgICAgICBpZiAoeCA9PSAxKXtcclxuICAgICAgICAgICAgICAgIGluaXRQYWdlMSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh4ID09IDIpe1xyXG4gICAgICAgICAgICAgICAgaW5pdFBhZ2UyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHggPT0gMyl7XHJcbiAgICAgICAgICAgICAgICBpbml0UGFnZTMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTW91bnRlZFwiKTtcclxuICAgICAgICBsb2FkRDMoKTtcclxuICAgICAgICBsb2FkSnF1ZXJ5KCk7XHJcbiAgICB9XHJcbn0pOyJdfQ==
